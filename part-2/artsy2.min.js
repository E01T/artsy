var c=!0,p=null,q=!1,r=0,s=1,t;a:{for(var aa=["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame"],u=0;u<aa.length;++u){var ba=aa[u];if(window[ba]){t=window[ba];break a}}t=function(b){var a=(new Date).getTime(),a=a-a%17+17-a;5>a&&(a=17);window.setTimeout(function(){b.call(window,(new Date).getTime())},a)}}var ca=4*Math.atan(1);Math.max(320,256);function v(b){return(1-Math.cos(b*ca))/2}
var w,z,A,da,ea,B,C,D=0,fa,E,ga,F,G,H,I,J,K,L,ha,M,N,O,P,Q,R,ia,ja=[31,0,481,0,440,460,256,511,71,460],ka=[256,37,440,37,405,431,256,472],la=[114,94,397,94,391,150,175,150,180,208,386,208,371,381,256,413,140,381,132,293,188,293,192,338,256,355,318,338,325,264,129,264];
function S(b,a,e,d,h,g,k){z.save();z.translate(h,g);z.scale(d,d);z.rotate(e);z.translate(-256,-256);z.beginPath();e=b.length;for(d=0;d<e;d+=2)0==d?z.moveTo(b[d],b[d+1]):z.lineTo(b[d],b[d+1]);z.closePath();z.globalAlpha=a;z.fillStyle=k;z.fill();z.restore()}
var ma,na,oa,pa,T=[],qa=[function(b,a,e){z.fillStyle="#000000";z.fillRect(0,0,640,512);b=2300>a?0:3E3>a?(a-2300)/700:9500>a?1:1E4>a?(1E4-a)/500:0;a=119*(1300>a?0:2E3>a?(a-1300)/700:8500>a?1:9E3>a?(9E3-a)/500:0)|0;e=-e-0.75;z.save();z.fillStyle="rgba("+a+","+a+","+a+",1)";z.font="60px sans-serif";z.scale(-0.5,1);z.translate(640*e,0);z.textAlign="left";z.textBaseline="top";z.fillText("Endpart loaded...",0,50);z.restore();z.globalAlpha=b;z.drawImage(F,320-F.width,460-2*F.height,2*F.width,2*F.height)},
function(b,a,e){z.fillStyle="#000000";z.fillRect(0,0,640,512);z.globalAlpha=0.05>e?20*e:0.95<e?20-20*e:1;b=7E3>a?5E3:8456>a?5E3+45*(a-7E3):10550>a?5E3:12006>a?5E3+45*(a-10550):14100>a?5E3:15556>a?5E3+45*(a-14100):5E3;e=60-700*e;H.fillStyle="#001700";H.fillRect(0,0,50,50);H.textAlign="left";H.textBaseline="middle";H.fillStyle="#ffffff";H.font="bold 40px sans-serif";H.fillText("SANITY",e,30);H.font="30px sans-serif";H.fillText("lbrtw.com for more info!",e+170,30);H.font="bold 40px sans-serif";H.fillText("SANITY",
e+500,30);e=H.getImageData(0,0,50,50);var d=0;a=160*(8E3>a?v(a/8E3):15E3>a?1-v((a-8E3)/7E3):v((a-15E3)/8E3));for(var h=25;-25<h;--h)for(var g=-25;25>g;++g){var k=h*A[b+16384&65535]+g*A[b&65535],n=320+2500*(g*A[b+16384&65535]-h*A[b&65535])/(300+2*k),k=256+1200*(10-k)/(300+2*k);0==h&&0==g&&console.log(n,k);var j=127<e.data[d],f=1-Math.abs(g)/25,l=0.5+f/2,m=h+a|0,f=A[6E3*(g-7+m)&65535]*f+A[900*-g&65535]+A[1300*(g+13)&65535]*l+A[8E3*(m+20)&65535]*f+A[1100*m&65535]+A[1700*(m+10)&65535]*l,f=(f-2)/4+m/100*
l;(l=0<f)&&j?(z.fillStyle="rgba(255,130,130,0.65)",z.fillRect(n,k-50*f-20,2,2)):j?(z.fillStyle="rgba(255,27,24,0.67)",z.fillRect(n,k-20,2,2)):l?(z.fillStyle="rgba(255,27,24,0.67)",z.fillRect(n,k-50*f,2,2)):(z.fillStyle="rgba(80,83,255,0.9)",z.fillRect(n,k,2,2));d+=4}},function(b,a,e){b=80*a;var d=900*A[20*a+16E3&65535]*(1-e)+1200,h=17*a,g=100*A[11*a+16E3&65535]+2500,k=1-e,n=0.4-0.2*e,j=K.data,f=0;for(y=0;128>y;++y){var l=y*d-b&65535,m=y*g-h&65535;for(x=160;0<x;--x){var Z=3*(50*(k*(A[x*d-b&65535]+
A[l])+n*(A[x*g-h&65535]+A[m]))+200|0);j[f++]=L[Z++];j[f++]=L[Z++];j[f++]=L[Z++];j[f++]=255}}J.putImageData(K,0,0);z.drawImage(I,0,0,640,512);2E3>a&&(b=(2E3-a)/2E3,g=1-b*b,b=200-200*g,d=512*g+b,h=400-400*g,g=h+640*g,z.fillStyle="#000000",z.fillRect(0,0,640,b),z.fillRect(0,d,640,512-d+1),z.fillRect(0,b-1,h,d-b+2),z.fillRect(g,b-1,640-g+1,d-b+2));22800<=a&&30300>=a&&z.drawImage(ha,0,23300>a?512-220*v((a-22800)/500):29800<=a?512-220*v((30300-a)/500):292,128,220);0.98<e&&(z.fillStyle="rgba(0,0,0,"+(50*
(e-0.98)).toFixed(3)+")",z.fillRect(0,0,640,512))},function(b,a,e){z.fillStyle="#110000";z.fillRect(0,0,640,340);z.fillStyle="#330000";z.fillRect(0,340,640,172);b=1/6-a%500/3E3;var d=300/(400+100*A[19*a+32768&65535]),h=306-200*Math.abs(A[41*a&65535])*d,g=320+200*A[19*a+49152&65535]*d;600>a&&(g-=600-600*v(a/600));14E3<a&&(h+=600*v((a-14E3)/600));a=200*d;z.fillStyle="#442222";z.beginPath();for(var k=0;6>k;++k){for(var n=k/6+b-1/24,j=n+1/12,n=2*v(n)-1,j=2*v(j)-1,f=0;40>=f;++f){var l=-1+0.05*f,m=M[f],
m=m*n*a+g,l=l*a+h;0==f?z.moveTo(m,l):z.lineTo(m,l)}for(f=40;0<=f;--f)l=-1+0.05*f,m=M[f],m=m*j*a+g,l=l*a+h,z.lineTo(m,l)}z.closePath();z.fill();k=z.createRadialGradient(g-0.6*a*d,h,0.2*a,g,h,a);k.addColorStop(0,"rgba("+(255*d).toFixed(0)+","+(221*d).toFixed(0)+","+(221*d).toFixed(0)+",255)");k.addColorStop(0.5,"#997777");k.addColorStop(1,"#553333");z.fillStyle=k;z.beginPath();for(k=0;6>k;++k){n=k/6+b-1/24;j=n+1/12;n=1-2*v(n);j=1-2*v(j);for(f=0;40>=f;++f)l=-1+0.05*f,m=M[f],m=m*n*a+g,l=l*a+h,0==f?z.moveTo(m,
l):z.lineTo(m,l);for(f=40;0<=f;--f)l=-1+0.05*f,m=M[f],m=m*j*a+g,l=l*a+h,z.lineTo(m,l)}z.closePath();z.fill();0.98<e&&(z.globalAlpha=50*(e-0.98),z.fillStyle="#000000",z.fillRect(0,0,640,512))},function(b,a,e){var d=0;b=78*A[17*a&65535]+128;for(var h=78*A[13*a+9E3&65535]+128,g=-49.5;50>g;++g)for(var k=1/Math.sin(Math.acos(g/50)),n=-49.5;50>n;++n){var j=n*n+g*g;if(2500<=j)R.data[d++]=R.data[d++]=R.data[d++]=R.data[d++]=0;else{var f=4*(256*(g*(1/Math.sin(Math.acos(n/50)))+h|0)+(n*k+b|0));2100<j?(j=(2500-
j)/400,R.data[d++]=O.data[f++]*j|0,R.data[d++]=O.data[f++]*j|0,R.data[d++]=O.data[f++]*j|0):(R.data[d++]=O.data[f++],R.data[d++]=O.data[f++],R.data[d++]=O.data[f++]);R.data[d++]=255}}Q.putImageData(R,0,0);d=1;0.96<e&&(d=25*(1-e));z.fillStyle="#000000";z.globalAlpha=1;z.fillRect(0,0,640,512);z.globalAlpha=d;z.drawImage(P,120,112,400,400);1E3<a&&(z.fillStyle="#000000",z.globalAlpha=(1500<a?1:(a-1E3)/500)*d,z.drawImage(ia,97,0,446,102));6300<a&&(j=6800<a?1:(a-6300)/500,a=-0.2*v(j),e=1.25-j,b=335,h=360-
300*j,S(ja,j*d,a,e,b,h,"#f83100"),S(ka,j*d,a,e,b,h,"#ff5301"),S(la,j*d,a,e,b,h,"rgba(240, 248, 255, 0.9)"))},function(b,a,e){z.fillStyle="#000000";z.fillRect(0,0,640,512);b=T[b];var d=b.g,h=d.width*b.h,g=d.height*b.i;z.drawImage(d,320-(h>>1),256-(g>>1),h,g);500>a?(z.globalAlpha=1-a/500,z.fillStyle=b.e,z.fillRect(0,0,640,512)):(a=a/e-a,500>a&&(z.globalAlpha=1-a/500,z.fillStyle=b.f,z.fillRect(0,0,640,512)))},function(b,a,e){z.fillStyle="#000073";z.fillRect(0,0,640,512);100<a&&(b=a/e-a,z.fillStyle="#ffffff",
z.font="30px sans-serif",z.textAlign="center",z.textBaseline="middle",z.fillText("This scene is not yet implemented...",320,256),z.font="20px sans-serif",z.fillText((b/1E3).toFixed(1)+" seconds to next implemented scene",320,296))}],ra=[{a:0,b:1E4,c:0,d:0},{a:1E4,b:29400,c:1,d:0},{a:29400,b:62400,c:2,d:0},{a:62400,b:77E3,c:3,d:0},{a:77E3,b:9E4,c:4,d:0},{a:9E4,b:92700,c:5,d:0},{a:92700,b:94500,c:5,d:1},{a:94500,b:96200,c:5,d:2},{a:96200,b:105E3,c:5,d:3},{a:9E4,b:201E3,c:6,d:0},q];
function sa(b){if(B){s=60*((b-ea)/1E3);r=b-B;var a=ra[D];a&&r>=a.b&&(++D,a=ra[D]);if(a){var e=r-a.a,d=e/(a.b-a.a);fa=qa[a.c];var h=(new Date).getTime();z.globalAlpha=1;z.save();fa.call(this,a.d,e,d,s);z.restore()}else E=q;a=(22-((new Date).getTime()-h)-10*s)/200;0<a&&(a*=0.005);a=da+a;1<a?a=1:0.1>a&&(a=0.1);da=a}C&&(1>C&&(B=b-1E3*C-250),ea=b);E?t(sa):(b=document.createEvent("Event"),b.initEvent("demoDone",c,c),window.dispatchEvent(b))}function ta(){E=c;t(sa)}function ua(){C=this.currentTime}
var U=[],V=0;function va(b){U.push(b);++V;b=document.createEvent("Event");b.initEvent("itemsLoader",c,c);b.total=V;b.j=V-U.length;window.dispatchEvent(b)}function W(b){for(var a=[],e=0;e<U.length;++e)U[e]!=b&&a.push(U[e]);U=a;b=document.createEvent("Event");b.initEvent("itemsLoader",c,c);b.total=V;b.j=V-U.length;window.dispatchEvent(b)}var X=p;function wa(){X&&window.clearTimeout(X);var b=this;X=window.setTimeout(function(){X=p;b.removeEventListener("progress",wa,q);W(b)},2E3)}
function xa(){X&&(window.clearTimeout(X),X=p);this.removeEventListener("progress",wa,q);W(this)}function ya(){W(this)}function Y(b){var a=new Image;va(a);a.addEventListener("load",ya,q);a.src=b+"?ts="+(new Date).getTime();return a}var $=p;
onLoadingDone=function(){$&&(window.clearTimeout($),$=p);for(var b=[],a=4*Math.atan(1),e=0;65535>=e;++e)b.push(Math.sin(e*a/32768));A=b;G=document.createElement("CANVAS");G.width=G.height=50;H=G.getContext("2d");I=document.createElement("CANVAS");I.width=160;I.height=128;J=I.getContext("2d");K=J.createImageData(160,128);L=[];for(b=200;0<b;--b){var a=3.5*b,e=1.9*b,d=0.7*b;255<a&&(a=255);255<e&&(e=255);255<d&&(d=255);L.push(a|0,e|0,d|0)}L.push(0,0,0);for(b=1;200>=b;++b)a=0.6*b,e=1.5*b,d=2.7*b,255<a&&
(a=255),255<e&&(e=255),255<d&&(d=255),L.push(a|0,e|0,d|0);M=[];for(b=-100;100>=b;b+=5)M.push(Math.sin(Math.acos(0.0099*b)));b=document.createElement("CANVAS");b.width=N.width;b.height=N.height;b=b.getContext("2d");b.drawImage(N,0,0);O=b.getImageData(0,0,N.width,N.height);P=document.createElement("CANVAS");P.width=P.height=100;Q=P.getContext("2d");R=Q.createImageData(100,100);T.push({e:"#000000",f:"#000000",g:ma,h:1,i:2});T.push({e:"#000000",f:"#000000",g:na,h:1,i:2});T.push({e:"#000000",f:"#ffffff",
g:oa,h:1,i:2});T.push({e:"#ffffff",f:"#000000",g:pa,h:2,i:2});ga.play()};
onItemsLoader=function(b){$&&(window.clearTimeout($),$=p);z.fillStyle="#000000";z.fillRect(0,0,640,512);z.fillStyle="#ffffff";b.j==b.total?(z.font="50px sans-serif",z.textAlign="center",z.textBaseline="middle",z.fillText("Loading done!",320,256),z.font="20px sans-serif",z.fillText("Click to start...",320,296),window.setTimeout(onLoadingDone,10),w.addEventListener("click",onLoadingDone,q)):(z.font="30px sans-serif",z.textAlign="center",z.textBaseline="middle",z.fillText("Loading...",320,256),z.font=
"20px sans-serif",z.fillText((100*(b.j/b.total)).toFixed(0)+" % done",320,296))};
onload=function(){w=document.getElementById("demo");z=w.getContext("2d");E=q;window.addEventListener("itemsLoader",onItemsLoader,q);var b=document.createElement("AUDIO");b.controls=c;b.k="auto";va(b);b.addEventListener("play",ta,q);b.addEventListener("timeupdate",ua,q);b.addEventListener("progress",wa,q);b.addEventListener("canplay",xa,q);var a=b.canPlayType("audio/ogg"),e=b.canPlayType("audio/mpeg");if("probably"==a||"maybe"==a&&"probably"!=e)b.src="elekfunk.ogg";else if("probably"==e||"maybe"==
e)b.src="elekfunk.mp3";b.load();ga=b;F=Y("muscleMan.png");ha=Y("sinePlasma.png");N=Y("murky.png");ia=Y("intelOutside2.png");ma=Y("mMonroe.png");na=Y("shiffer.png");oa=Y("crawford.png");pa=Y("arte.png")};window.onload=onload;
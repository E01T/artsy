var c=!0,m=null,q=!1,r=0,s=1,t;a:{for(var aa=["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame"],u=0;u<aa.length;++u){var ba=aa[u];if(window[ba]){t=window[ba];break a}}t=function(b){var a=(new Date).getTime(),a=a-a%17+17-a;5>a&&(a=17);window.setTimeout(function(){b.call(window,(new Date).getTime())},a)}}var ca=4*Math.atan(1);Math.max(320,256);function v(b){return(1-Math.cos(b*ca))/2}
var w,z,B,da,ga,C,D,E=0,ha,F,ia,G,H,I,J,K,L,M,ja,N,O,P,Q,ka,R,la,ma=[31,0,481,0,440,460,256,511,71,460],na=[256,37,440,37,405,431,256,472],oa=[114,94,397,94,391,150,175,150,180,208,386,208,371,381,256,413,140,381,132,293,188,293,192,338,256,355,318,338,325,264,129,264];
function pa(b,a,e,d,j,g,l){z.save();z.translate(j,g);z.scale(d,d);z.rotate(e);z.translate(-256,-256);z.beginPath();e=b.length;for(d=0;d<e;d+=2)0==d?z.moveTo(b[d],b[d+1]):z.lineTo(b[d],b[d+1]);z.closePath();z.globalAlpha=a;z.fillStyle=l;z.fill();z.restore()}
var qa,ra,sa,ta,T=[],ua=[0,0,0,25,19,0,51,39,0,102,43,0,136,49,0,187,40,0,187,69,0,205,101,0,221,152,0,223,183,0,222,229,2,103,233,11,19,238,17,9,255,123,2,255,242,1,135,255],U,va,V,wa=32768/(4*Math.atan(1)),xa=[function(b,a,e){z.fillStyle="#000000";z.fillRect(0,0,640,512);b=2300>a?0:3E3>a?(a-2300)/700:9500>a?1:1E4>a?(1E4-a)/500:0;a=119*(1300>a?0:2E3>a?(a-1300)/700:8500>a?1:9E3>a?(9E3-a)/500:0)|0;e=-e-0.75;z.save();z.fillStyle="rgba("+a+","+a+","+a+",1)";z.font="60px sans-serif";z.scale(-0.5,1);z.translate(640*
e,0);z.textAlign="left";z.textBaseline="top";z.fillText("Endpart loaded...",0,50);z.restore();z.globalAlpha=b;z.drawImage(G,320-G.width,460-2*G.height,2*G.width,2*G.height)},function(b,a,e){z.fillStyle="#000000";z.fillRect(0,0,640,512);z.globalAlpha=0.05>e?20*e:0.95<e?20-20*e:1;b=7E3>a?5E3:8456>a?5E3+45*(a-7E3):10550>a?5E3:12006>a?5E3+45*(a-10550):14100>a?5E3:15556>a?5E3+45*(a-14100):5E3;e=60-700*e;I.fillStyle="#001700";I.fillRect(0,0,50,50);I.textAlign="left";I.textBaseline="middle";I.fillStyle=
"#ffffff";I.font="bold 40px sans-serif";I.fillText("SANITY",e,30);I.font="30px sans-serif";I.fillText("lbrtw.com for more info!",e+170,30);I.font="bold 40px sans-serif";I.fillText("SANITY",e+500,30);e=I.getImageData(0,0,50,50);var d=0;a=160*(8E3>a?v(a/8E3):15E3>a?1-v((a-8E3)/7E3):v((a-15E3)/8E3));for(var j=25;-25<j;--j)for(var g=-25;25>g;++g){var l=j*B[b+16384&65535]+g*B[b&65535],p=320+2500*(g*B[b+16384&65535]-j*B[b&65535])/(300+2*l),l=256+1200*(10-l)/(300+2*l),h=127<e.data[d],f=1-Math.abs(g)/25,
k=0.5+f/2,n=j+a|0,f=B[6E3*(g-7+n)&65535]*f+B[900*-g&65535]+B[1300*(g+13)&65535]*k+B[8E3*(n+20)&65535]*f+B[1100*n&65535]+B[1700*(n+10)&65535]*k,f=(f-2)/4+n/100*k;(k=0<f)&&h?(z.fillStyle="rgba(255,130,130,0.65)",z.fillRect(p,l-50*f-20,2,2)):h?(z.fillStyle="rgba(255,27,24,0.67)",z.fillRect(p,l-20,2,2)):k?(z.fillStyle="rgba(255,27,24,0.67)",z.fillRect(p,l-50*f,2,2)):(z.fillStyle="rgba(80,83,255,0.9)",z.fillRect(p,l,2,2));d+=4}},function(b,a,e){b=80*a;var d=900*B[20*a+16E3&65535]*(1-e)+1200,j=17*a,g=100*
B[11*a+16E3&65535]+2500,l=1-e,p=0.4-0.2*e,h=L.data,f=0;for(y=0;128>y;++y){var k=y*d-b&65535,n=y*g-j&65535;for(x=160;0<x;--x){var A=3*(50*(l*(B[x*d-b&65535]+B[k])+p*(B[x*g-j&65535]+B[n]))+200|0);h[f++]=M[A++];h[f++]=M[A++];h[f++]=M[A++];h[f++]=255}}K.putImageData(L,0,0);z.drawImage(J,0,0,640,512);2E3>a&&(b=(2E3-a)/2E3,g=1-b*b,b=200-200*g,d=512*g+b,j=400-400*g,g=j+640*g,z.fillStyle="#000000",z.fillRect(0,0,640,b),z.fillRect(0,d,640,512-d+1),z.fillRect(0,b-1,j,d-b+2),z.fillRect(g,b-1,640-g+1,d-b+2));
22800<=a&&30300>=a&&z.drawImage(ja,0,23300>a?512-220*v((a-22800)/500):29800<=a?512-220*v((30300-a)/500):292,128,220);0.98<e&&(z.fillStyle="rgba(0,0,0,"+(50*(e-0.98)).toFixed(3)+")",z.fillRect(0,0,640,512))},function(b,a,e){z.fillStyle="#110000";z.fillRect(0,0,640,340);z.fillStyle="#330000";z.fillRect(0,340,640,172);b=1/6-a%500/3E3;var d=300/(400+100*B[19*a+32768&65535]),j=306-200*Math.abs(B[41*a&65535])*d,g=320+200*B[19*a+49152&65535]*d;600>a&&(g-=600-600*v(a/600));14E3<a&&(j+=600*v((a-14E3)/600));
a=200*d;z.fillStyle="#442222";z.beginPath();for(var l=0;6>l;++l){for(var p=l/6+b-1/24,h=p+1/12,p=2*v(p)-1,h=2*v(h)-1,f=0;40>=f;++f){var k=-1+0.05*f,n=N[f],n=n*p*a+g,k=k*a+j;0==f?z.moveTo(n,k):z.lineTo(n,k)}for(f=40;0<=f;--f)k=-1+0.05*f,n=N[f],n=n*h*a+g,k=k*a+j,z.lineTo(n,k)}z.closePath();z.fill();l=z.createRadialGradient(g-0.6*a*d,j,0.2*a,g,j,a);l.addColorStop(0,"rgba("+(255*d).toFixed(0)+","+(221*d).toFixed(0)+","+(221*d).toFixed(0)+",255)");l.addColorStop(0.5,"#997777");l.addColorStop(1,"#553333");
z.fillStyle=l;z.beginPath();for(l=0;6>l;++l){p=l/6+b-1/24;h=p+1/12;p=1-2*v(p);h=1-2*v(h);for(f=0;40>=f;++f)k=-1+0.05*f,n=N[f],n=n*p*a+g,k=k*a+j,0==f?z.moveTo(n,k):z.lineTo(n,k);for(f=40;0<=f;--f)k=-1+0.05*f,n=N[f],n=n*h*a+g,k=k*a+j,z.lineTo(n,k)}z.closePath();z.fill();0.98<e&&(z.globalAlpha=50*(e-0.98),z.fillStyle="#000000",z.fillRect(0,0,640,512))},function(b,a,e){var d=0;b=78*B[17*a&65535]+128;for(var j=78*B[13*a+9E3&65535]+128,g=-49.5;50>g;++g)for(var l=1/Math.sin(Math.acos(g/50)),p=-49.5;50>p;++p){var h=
p*p+g*g;if(2500<=h)R.data[d++]=R.data[d++]=R.data[d++]=R.data[d++]=0;else{var f=4*(256*(g*(1/Math.sin(Math.acos(p/50)))+j|0)+(p*l+b|0));2100<h?(h=(2500-h)/400,R.data[d++]=P.data[f++]*h|0,R.data[d++]=P.data[f++]*h|0,R.data[d++]=P.data[f++]*h|0):(R.data[d++]=P.data[f++],R.data[d++]=P.data[f++],R.data[d++]=P.data[f++]);R.data[d++]=255}}ka.putImageData(R,0,0);d=1;0.96<e&&(d=25*(1-e));z.fillStyle="#000000";z.globalAlpha=1;z.fillRect(0,0,640,512);z.globalAlpha=d;z.drawImage(Q,120,112,400,400);1E3<a&&(z.fillStyle=
"#000000",z.globalAlpha=(1500<a?1:(a-1E3)/500)*d,z.drawImage(la,97,0,446,102));6300<a&&(h=6800<a?1:(a-6300)/500,a=-0.2*v(h),e=1.25-h,b=335,j=360-300*h,pa(ma,h*d,a,e,b,j,"#f83100"),pa(na,h*d,a,e,b,j,"#ff5301"),pa(oa,h*d,a,e,b,j,"rgba(240, 248, 255, 0.9)"))},function(b,a,e){z.fillStyle="#000000";z.fillRect(0,0,640,512);b=T[b];var d=b.g,j=d.width*b.h,g=d.height*b.i;z.drawImage(d,320-(j>>1),256-(g>>1),j,g);500>a?(z.globalAlpha=1-a/500,z.fillStyle=b.e,z.fillRect(0,0,640,512)):(a=a/e-a,500>a&&(z.globalAlpha=
1-a/500,z.fillStyle=b.f,z.fillRect(0,0,640,512)))},function(b,a,e){b=0;var d=10*a;a=1E5*B[3*a&65535];for(var j=-42.5;43>j;++j)for(var g=-47.5;48>g;++g){var l=g*g+j*j,p=Math.atan((g*B[a+16384&65535]-j*B[a&65535])/(j*B[a+16384&65535]+g*B[a&65535])),h=(d/100-Math.sqrt(l))/50,f=h|0,k=h-f,n=0>h?0:(7*f&3)+1,A=0>h?0:(13*f&13)+5>>1,ea=0>h?0:(9*f&7)+2<<2,fa=0>h?0:(7*f&7)+1<<1;if(0.9<k&&0<h)var h=f+1,f=(13*h&13)+5>>1,Ca=(9*h&7)+2<<2,Da=(7*h&7)+1<<1,k=10*(k-0.9),S=1-k,n=n*S+((7*h&3)+1)*k,A=A*S+f*k,ea=ea*S+Ca*
k,fa=fa*S+Da*k;value=B[d-l*n&65535]*ea+B[p*wa*A&65535]*fa&15;value*=3;V.data[b++]=ua[value++];V.data[b++]=ua[value++];V.data[b++]=ua[value++];V.data[b++]=255}va.putImageData(V,0,0);z.fillStyle="#000000";z.fillRect(0,0,640,512);z.drawImage(U,128,84,384,344);0.95<e&&(z.globalAlpha=20*(e-0.95),z.fillRect(0,0,640,512))},function(b,a,e){z.fillStyle="#000073";z.fillRect(0,0,640,512);100<a&&(b=a/e-a,z.fillStyle="#ffffff",z.font="30px sans-serif",z.textAlign="center",z.textBaseline="middle",z.fillText("This scene is not yet implemented...",
320,256),z.font="20px sans-serif",z.fillText((b/1E3).toFixed(1)+" seconds to go",320,296))}],ya=[{a:0,b:1E4,c:0,d:0},{a:1E4,b:29400,c:1,d:0},{a:29400,b:62400,c:2,d:0},{a:62400,b:77E3,c:3,d:0},{a:77E3,b:9E4,c:4,d:0},{a:9E4,b:92700,c:5,d:0},{a:92700,b:94500,c:5,d:1},{a:94500,b:96200,c:5,d:2},{a:96200,b:105E3,c:5,d:3},{a:105E3,b:133E3,c:6,d:0},{a:133E3,b:201E3,c:7,d:0},q];
function za(b){if(C){s=60*((b-ga)/1E3);r=b-C;var a=ya[E];a&&r>=a.b&&(++E,a=ya[E]);if(a){var e=r-a.a,d=e/(a.b-a.a);ha=xa[a.c];var j=(new Date).getTime();z.globalAlpha=1;z.save();ha.call(this,a.d,e,d,s);z.restore()}else F=q;a=(22-((new Date).getTime()-j)-10*s)/200;0<a&&(a*=0.005);a=da+a;1<a?a=1:0.1>a&&(a=0.1);da=a}D&&(1>D&&(C=b-1E3*D-250),ga=b);F?t(za):(b=document.createEvent("Event"),b.initEvent("demoDone",c,c),window.dispatchEvent(b))}function Aa(){F=c;t(za)}function Ba(){D=this.currentTime}
var W=[],X=0;function Ea(b){W.push(b);++X;b=document.createEvent("Event");b.initEvent("itemsLoader",c,c);b.total=X;b.j=X-W.length;window.dispatchEvent(b)}function Fa(b){for(var a=[],e=0;e<W.length;++e)W[e]!=b&&a.push(W[e]);W=a;b=document.createEvent("Event");b.initEvent("itemsLoader",c,c);b.total=X;b.j=X-W.length;window.dispatchEvent(b)}var Y=m;function Ga(){Y&&window.clearTimeout(Y);var b=this;Y=window.setTimeout(function(){Y=m;b.removeEventListener("progress",Ga,q);Fa(b)},2E3)}
function Ha(){Y&&(window.clearTimeout(Y),Y=m);this.removeEventListener("progress",Ga,q);Fa(this)}function Ia(){Fa(this)}function Z(b){var a=new Image;Ea(a);a.addEventListener("load",Ia,q);a.src=b+"?ts="+(new Date).getTime();return a}var $=m;
onLoadingDone=function(){$&&(window.clearTimeout($),$=m);for(var b=[],a=4*Math.atan(1),e=0;65535>=e;++e)b.push(Math.sin(e*a/32768));B=b;H=document.createElement("CANVAS");H.width=H.height=50;I=H.getContext("2d");J=document.createElement("CANVAS");J.width=160;J.height=128;K=J.getContext("2d");L=K.createImageData(160,128);M=[];for(b=200;0<b;--b){var a=3.5*b,e=1.9*b,d=0.7*b;255<a&&(a=255);255<e&&(e=255);255<d&&(d=255);M.push(a|0,e|0,d|0)}M.push(0,0,0);for(b=1;200>=b;++b)a=0.6*b,e=1.5*b,d=2.7*b,255<a&&
(a=255),255<e&&(e=255),255<d&&(d=255),M.push(a|0,e|0,d|0);N=[];for(b=-100;100>=b;b+=5)N.push(Math.sin(Math.acos(0.0099*b)));b=document.createElement("CANVAS");b.width=O.width;b.height=O.height;b=b.getContext("2d");b.drawImage(O,0,0);P=b.getImageData(0,0,O.width,O.height);Q=document.createElement("CANVAS");Q.width=Q.height=100;ka=Q.getContext("2d");R=ka.createImageData(100,100);T.push({e:"#000000",f:"#000000",g:qa,h:1,i:2});T.push({e:"#000000",f:"#000000",g:ra,h:1,i:2});T.push({e:"#000000",f:"#ffffff",
g:sa,h:1,i:2});T.push({e:"#ffffff",f:"#000000",g:ta,h:2,i:2});U=document.createElement("CANVAS");U.width=96;U.height=86;va=U.getContext("2d");V=va.createImageData(96,86);ia.play()};
onItemsLoader=function(b){$&&(window.clearTimeout($),$=m);z.fillStyle="#000000";z.fillRect(0,0,640,512);z.fillStyle="#ffffff";b.j==b.total?(z.font="50px sans-serif",z.textAlign="center",z.textBaseline="middle",z.fillText("Loading done!",320,256),z.font="20px sans-serif",z.fillText("Click to start...",320,296),window.setTimeout(onLoadingDone,10),w.addEventListener("click",onLoadingDone,q)):(z.font="30px sans-serif",z.textAlign="center",z.textBaseline="middle",z.fillText("Loading...",320,256),z.font=
"20px sans-serif",z.fillText((100*(b.j/b.total)).toFixed(0)+" % done",320,296))};
onload=function(){w=document.getElementById("demo");z=w.getContext("2d");F=q;window.addEventListener("itemsLoader",onItemsLoader,q);var b=document.createElement("AUDIO");b.controls=c;b.k="auto";Ea(b);b.addEventListener("play",Aa,q);b.addEventListener("timeupdate",Ba,q);b.addEventListener("progress",Ga,q);b.addEventListener("canplay",Ha,q);var a=b.canPlayType("audio/ogg"),e=b.canPlayType("audio/mpeg");if("probably"==a||"maybe"==a&&"probably"!=e)b.src="elekfunk.ogg";else if("probably"==e||"maybe"==
e)b.src="elekfunk.mp3";b.load();ia=b;G=Z("muscleMan.png");ja=Z("sinePlasma.png");O=Z("murky.png");la=Z("intelOutside2.png");qa=Z("mMonroe2.png");ra=Z("shiffer2.png");sa=Z("crawford2.png");ta=Z("arte2.png")};window.onload=onload;
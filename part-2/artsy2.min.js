var c=!0,l=null,r=!1,s=Math.random,aa=0,ba=1,t;a:{for(var ca=["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame"],da=0;da<ca.length;++da){var ea=ca[da];if(window[ea]){t=window[ea];break a}}t=function(b){var a=(new Date).getTime(),a=a-a%17+17-a;5>a&&(a=17);window.setTimeout(function(){b.call(window,(new Date).getTime())},a)}}var fa=4*Math.atan(1);Math.max(320,256);function u(b){return(1-Math.cos(b*fa))/2}
var ga,v,w,ha,ia,ja,z,ka=0,la,A,ma,B,D,E,F,na,oa,G,pa,H,I,J,K,qa,L,ra,sa=[31,0,481,0,440,460,256,511,71,460],ta=[256,37,440,37,405,431,256,472],ua=[114,94,397,94,391,150,175,150,180,208,386,208,371,381,256,413,140,381,132,293,188,293,192,338,256,355,318,338,325,264,129,264];
function va(b,a,d,e,f,g,k){v.save();v.translate(f,g);v.scale(e,e);v.rotate(d);v.translate(-256,-256);v.beginPath();d=b.length;for(e=0;e<d;e+=2)0==e?v.moveTo(b[e],b[e+1]):v.lineTo(b[e],b[e+1]);v.closePath();v.globalAlpha=a;v.fillStyle=k;v.fill();v.restore()}
for(var wa,xa,ya,za,M=[],Aa=[0,0,0,25,19,0,51,39,0,102,43,0,136,49,0,187,40,0,187,69,0,205,101,0,221,152,0,223,183,0,222,229,2,103,233,11,19,238,17,9,255,123,2,255,242,1,135,255],N,Ba,O,Ca=32768/(4*Math.atan(1)),Da,Ea=[],P=0;7>=P;++P){var R=136+17*P|0,Fa=68+102/7*P|0;Ea.push("#"+(16777216+65536*R+256*Fa+Fa).toString(16).substr(1));Ea.push("#"+(16777216+65536*R+256*R+R).toString(16).substr(1))}
var S,Ga,T=0,Ha=[function(b,a,d){v.fillStyle="#000000";v.fillRect(0,0,640,512);b=2300>a?0:3E3>a?(a-2300)/700:9500>a?1:1E4>a?(1E4-a)/500:0;a=119*(1300>a?0:2E3>a?(a-1300)/700:8500>a?1:9E3>a?(9E3-a)/500:0)|0;d=-d-0.75;v.save();v.fillStyle="rgba("+a+","+a+","+a+",1)";v.font="60px sans-serif";v.scale(-0.5,1);v.translate(640*d,0);v.textAlign="left";v.textBaseline="top";v.fillText("Endpart loaded...",0,50);v.restore();v.globalAlpha=b;v.drawImage(B,320-B.width,460-2*B.height,2*B.width,2*B.height)},function(b,
a,d){v.fillStyle="#000000";v.fillRect(0,0,640,512);v.globalAlpha=0.05>d?20*d:0.95<d?20-20*d:1;b=7E3>a?5E3:8456>a?5E3+45*(a-7E3):10550>a?5E3:12006>a?5E3+45*(a-10550):14100>a?5E3:15556>a?5E3+45*(a-14100):5E3;d=60-700*d;E.fillStyle="#001700";E.fillRect(0,0,50,50);E.textAlign="left";E.textBaseline="middle";E.fillStyle="#ffffff";E.font="bold 40px sans-serif";E.fillText("SANITY",d,30);E.font="30px sans-serif";E.fillText("lbrtw.com for more info!",d+170,30);E.font="bold 40px sans-serif";E.fillText("SANITY",
d+500,30);d=E.getImageData(0,0,50,50);var e=0;a=160*(8E3>a?u(a/8E3):15E3>a?1-u((a-8E3)/7E3):u((a-15E3)/8E3));for(var f=25;-25<f;--f)for(var g=-25;25>g;++g){var k=f*w[b+16384&65535]+g*w[b&65535],m=320+2500*(g*w[b+16384&65535]-f*w[b&65535])/(300+2*k),k=256+1200*(10-k)/(300+2*k),j=127<d.data[e],h=1-Math.abs(g)/25,n=0.5+h/2,p=f+a|0,h=w[6E3*(g-7+p)&65535]*h+w[900*-g&65535]+w[1300*(g+13)&65535]*n+w[8E3*(p+20)&65535]*h+w[1100*p&65535]+w[1700*(p+10)&65535]*n,h=(h-2)/4+p/100*n;(n=0<h)&&j?(v.fillStyle="rgba(255,130,130,0.65)",
v.fillRect(m,k-50*h-20,2,2)):j?(v.fillStyle="rgba(255,27,24,0.67)",v.fillRect(m,k-20,2,2)):n?(v.fillStyle="rgba(255,27,24,0.67)",v.fillRect(m,k-50*h,2,2)):(v.fillStyle="rgba(80,83,255,0.9)",v.fillRect(m,k,2,2));e+=4}},function(b,a,d){b=80*a;var e=900*w[20*a+16E3&65535]*(1-d)+1200,f=17*a,g=100*w[11*a+16E3&65535]+2500,k=1-d,m=0.4-0.2*d,j=oa.data,h=0;for(y=0;128>y;++y){var n=y*e-b&65535,p=y*g-f&65535;for(x=160;0<x;--x){var q=3*(50*(k*(w[x*e-b&65535]+w[n])+m*(w[x*g-f&65535]+w[p]))+200|0);j[h++]=G[q++];
j[h++]=G[q++];j[h++]=G[q++];j[h++]=255}}na.putImageData(oa,0,0);v.drawImage(F,0,0,640,512);2E3>a&&(b=(2E3-a)/2E3,g=1-b*b,b=200-200*g,e=512*g+b,f=400-400*g,g=f+640*g,v.fillStyle="#000000",v.fillRect(0,0,640,b),v.fillRect(0,e,640,512-e+1),v.fillRect(0,b-1,f,e-b+2),v.fillRect(g,b-1,640-g+1,e-b+2));22800<=a&&30300>=a&&v.drawImage(pa,0,23300>a?512-220*u((a-22800)/500):29800<=a?512-220*u((30300-a)/500):292,128,220);0.98<d&&(v.fillStyle="rgba(0,0,0,"+(50*(d-0.98)).toFixed(3)+")",v.fillRect(0,0,640,512))},
function(b,a,d){v.fillStyle="#110000";v.fillRect(0,0,640,340);v.fillStyle="#330000";v.fillRect(0,340,640,172);b=1/6-a%500/3E3;var e=300/(400+100*w[19*a+32768&65535]),f=306-200*Math.abs(w[41*a&65535])*e,g=320+200*w[19*a+49152&65535]*e;600>a&&(g-=600-600*u(a/600));14E3<a&&(f+=600*u((a-14E3)/600));a=200*e;v.fillStyle="#442222";v.beginPath();for(var k=0;6>k;++k){for(var m=k/6+b-1/24,j=m+1/12,m=2*u(m)-1,j=2*u(j)-1,h=0;40>=h;++h){var n=-1+0.05*h,p=H[h],p=p*m*a+g,n=n*a+f;0==h?v.moveTo(p,n):v.lineTo(p,n)}for(h=
40;0<=h;--h)n=-1+0.05*h,p=H[h],p=p*j*a+g,n=n*a+f,v.lineTo(p,n)}v.closePath();v.fill();k=v.createRadialGradient(g-0.6*a*e,f,0.2*a,g,f,a);k.addColorStop(0,"rgba("+(255*e).toFixed(0)+","+(221*e).toFixed(0)+","+(221*e).toFixed(0)+",255)");k.addColorStop(0.5,"#997777");k.addColorStop(1,"#553333");v.fillStyle=k;v.beginPath();for(k=0;6>k;++k){m=k/6+b-1/24;j=m+1/12;m=1-2*u(m);j=1-2*u(j);for(h=0;40>=h;++h)n=-1+0.05*h,p=H[h],p=p*m*a+g,n=n*a+f,0==h?v.moveTo(p,n):v.lineTo(p,n);for(h=40;0<=h;--h)n=-1+0.05*h,p=
H[h],p=p*j*a+g,n=n*a+f,v.lineTo(p,n)}v.closePath();v.fill();0.98<d&&(v.globalAlpha=50*(d-0.98),v.fillStyle="#000000",v.fillRect(0,0,640,512))},function(b,a,d){var e=0;b=78*w[17*a&65535]+128;for(var f=78*w[13*a+9E3&65535]+128,g=-49.5;50>g;++g)for(var k=1/Math.sin(Math.acos(g/50)),m=-49.5;50>m;++m){var j=m*m+g*g;if(2500<=j)L.data[e++]=L.data[e++]=L.data[e++]=L.data[e++]=0;else{var h=4*(256*(g*(1/Math.sin(Math.acos(m/50)))+f|0)+(m*k+b|0));2100<j?(j=(2500-j)/400,L.data[e++]=J.data[h++]*j|0,L.data[e++]=
J.data[h++]*j|0,L.data[e++]=J.data[h++]*j|0):(L.data[e++]=J.data[h++],L.data[e++]=J.data[h++],L.data[e++]=J.data[h++]);L.data[e++]=255}}qa.putImageData(L,0,0);e=1;0.96<d&&(e=25*(1-d));v.fillStyle="#000000";v.globalAlpha=1;v.fillRect(0,0,640,512);v.globalAlpha=e;v.drawImage(K,120,112,400,400);1E3<a&&(v.fillStyle="#000000",v.globalAlpha=(1500<a?1:(a-1E3)/500)*e,v.drawImage(ra,97,0,446,102));6300<a&&(j=6800<a?1:(a-6300)/500,a=-0.2*u(j),d=1.25-j,b=335,f=360-300*j,va(sa,j*e,a,d,b,f,"#f83100"),va(ta,j*
e,a,d,b,f,"#ff5301"),va(ua,j*e,a,d,b,f,"rgba(240, 248, 255, 0.9)"))},function(b,a,d){v.fillStyle="#000000";v.fillRect(0,0,640,512);b=M[b];var e=b.g,f=e.width*b.h,g=e.height*b.i;v.drawImage(e,320-(f>>1),256-(g>>1),f,g);500>a?(v.globalAlpha=1-a/500,v.fillStyle=b.e,v.fillRect(0,0,640,512)):(a=a/d-a,500>a&&(v.globalAlpha=1-a/500,v.fillStyle=b.f,v.fillRect(0,0,640,512)))},function(b,a,d){b=0;var e=10*a;a=1E5*w[3*a&65535];for(var f=-42.5;43>f;++f)for(var g=-47.5;48>g;++g){var k=g*g+f*f,m=Math.atan((g*w[a+
16384&65535]-f*w[a&65535])/(f*w[a+16384&65535]+g*w[a&65535])),j=(e/100-Math.sqrt(k))/50,h=j|0,n=j-h,p=0>j?0:(7*h&3)+1,q=0>j?0:(13*h&13)+5>>1,Q=0>j?0:(9*h&7)+2<<2,C=0>j?0:(7*h&7)+1<<1;if(0.9<n&&0<j)var j=h+1,h=(13*j&13)+5>>1,Z=(9*j&7)+2<<2,Ma=(7*j&7)+1<<1,n=10*(n-0.9),$=1-n,p=p*$+((7*j&3)+1)*n,q=q*$+h*n,Q=Q*$+Z*n,C=C*$+Ma*n;value=w[e-k*p&65535]*Q+w[m*Ca*q&65535]*C&15;value*=3;O.data[b++]=Aa[value++];O.data[b++]=Aa[value++];O.data[b++]=Aa[value++];O.data[b++]=255}Ba.putImageData(O,0,0);v.fillStyle=
"#000000";v.fillRect(0,0,640,512);v.drawImage(N,128,84,384,344);0.95<d&&(v.globalAlpha=20*(d-0.95),v.fillRect(0,0,640,512))},function(b,a,d){var e=0;if(0==b){var e=512,f=5*w[13*a&65535]+23,g=2*w[9*a+16384&65535]+2;a=2.5*w[5*a+5E4&65535]+2.5;var k=10*(d-0.9);if(0<k){var m=0.8465*k+3;a=a*(1-k)+0*k;k=u(k);f=f*(1-k)+15*k;g=g*(1-k)+m*k}v.fillStyle="#442133";v.fillRect(0,0,640,512);for(m=0;12>=m;++m)for(var j=40/(f-m),h=0;4>=h;++h){var n=200*(h-g-0.25)*j+256,p=200*(h-g+0.25)*j+256;12==m&&(4==h&&0<k)&&(e=
n);if(0<p&&512>n){0==m&&(v.fillStyle="#553244",v.fillRect(0,n,640,p-n));for(var q=0;5>=q;++q){var Q=q*q&1,C=200*(q-a-0.25)*j+320,Z=200*(q-a+0.25)*j+320;0<Z&&640>C&&(v.fillStyle=Ea[m+Q],v.fillRect(C,n,Z-C,p-n))}}}0.05>d&&(v.globalAlpha=1-20*d,v.fillStyle="#000000",v.fillRect(0,0,640,512))}512>e&&(v.drawImage(Da,0,e,640,512),1==b&&0.95<d&&(v.globalAlpha=20*(d-0.95),v.fillStyle="#441022",v.fillRect(0,0,640,512)))},function(b,a,d){var e=S[T];T=1-T;b=Ga[T];for(var f=0;512>f;f+=16)for(var g=f+8-256,k=0;640>
k;k+=16){var m=k+8-320,j=0.995*(m+g/48)+320-8,m=0.995*(g-m/48)+256-8;0>j&&(j=0);624<j&&(j=624);0>m&&(m=0);496<m&&(m=496);b.drawImage(e,j,m,16,16,k,f,16,16)}if(0.75>d){d=17*a;a*=7;b.fillStyle="#ffffff";f=30*w[a&65535]+90;e=320+f*w[d&65535]-10;f=256+f*w[d+16384&65535]-10;for(g=0;9>g;++g)b.fillRect(20*s()+e,20*s()+f,2,2);d=-1.1*d+7E3;a*=1.05;b.fillStyle="#883366";f=30*w[a&65535]+90;e=320+f*w[d&65535]-10;f=256+f*w[d+16384&65535]-10;for(g=0;9>g;++g)b.fillRect(20*s()+e,20*s()+f,2,2);d*=-0.8;a*=-1.05;b.fillStyle=
"#aa7766";f=30*w[a&65535]+90;e=320+f*w[d&65535]-10;f=256+f*w[d+16384&65535]-10;for(g=0;9>g;++g)b.fillRect(20*s()+e,20*s()+f,2,2);d*=-1.2;b.fillStyle="#ee8899";f=30*w[-0.9*a&65535]+90;e=320+f*w[d&65535]-10;f=256+f*w[d+16384&65535]-10;for(g=0;9>g;++g)b.fillRect(20*s()+e,20*s()+f,2,2)}b.fillStyle="#441022";b.beginPath();b.arc(320,256,64,0,2*Math.PI,r);b.closePath();b.fill();v.drawImage(S[T],0,0)},function(b,a,d){v.fillStyle="#000073";v.fillRect(0,0,640,512);100<a&&(b=a/d-a,v.fillStyle="#ffffff",v.font=
"30px sans-serif",v.textAlign="center",v.textBaseline="middle",v.fillText("This scene is not yet implemented...",320,256),v.font="20px sans-serif",v.fillText((b/1E3).toFixed(1)+" seconds to go",320,296))}],Ia=[{a:0,b:1E4,c:0,d:0},{a:1E4,b:29400,c:1,d:0},{a:29400,b:62400,c:2,d:0},{a:62400,b:77E3,c:3,d:0},{a:77E3,b:9E4,c:4,d:0},{a:9E4,b:92700,c:5,d:0},{a:92700,b:94500,c:5,d:1},{a:94500,b:96200,c:5,d:2},{a:96200,b:105E3,c:5,d:3},{a:105E3,b:133E3,c:6,d:0},{a:133E3,b:147E3,c:7,d:0},{a:147E3,b:154200,c:7,
d:1},{a:154200,b:182E3,c:8,d:0},{a:182E3,b:202E3,c:9,d:0},r];
function Ja(b){if(ja){ba=60*((b-ia)/1E3);aa=b-ja;var a=Ia[ka];a&&aa>=a.b&&(++ka,a=Ia[ka]);if(a){var d=aa-a.a,e=d/(a.b-a.a);la=Ha[a.c];var f=(new Date).getTime();v.globalAlpha=1;v.save();la.call(this,a.d,d,e,ba);v.restore()}else A=r;a=(22-((new Date).getTime()-f)-10*ba)/200;0<a&&(a*=0.005);a=ha+a;1<a?a=1:0.1>a&&(a=0.1);ha=a}z&&(1>z&&(ja=b-1E3*z-250),ia=b);A?t(Ja):(b=document.createEvent("Event"),b.initEvent("demoDone",c,c),window.dispatchEvent(b))}function Ka(){A=c;t(Ja)}
function La(){z=this.currentTime}var U=[],V=0;function Na(b){U.push(b);++V;b=document.createEvent("Event");b.initEvent("itemsLoader",c,c);b.total=V;b.j=V-U.length;window.dispatchEvent(b)}function Oa(b){for(var a=[],d=0;d<U.length;++d)U[d]!=b&&a.push(U[d]);U=a;b=document.createEvent("Event");b.initEvent("itemsLoader",c,c);b.total=V;b.j=V-U.length;window.dispatchEvent(b)}var W=l;
function Pa(){W&&window.clearTimeout(W);var b=this;W=window.setTimeout(function(){W=l;b.removeEventListener("progress",Pa,r);Oa(b)},2E3)}function Qa(){W&&(window.clearTimeout(W),W=l);this.removeEventListener("progress",Pa,r);Oa(this)}function Ra(){Oa(this)}function X(b){var a=new Image;Na(a);a.addEventListener("load",Ra,r);a.src=b+"?ts="+(new Date).getTime();return a}var Y=l;
onLoadingDone=function(){Y&&(window.clearTimeout(Y),Y=l);for(var b=[],a=4*Math.atan(1),d=0;65535>=d;++d)b.push(Math.sin(d*a/32768));w=b;D=document.createElement("CANVAS");D.width=D.height=50;E=D.getContext("2d");F=document.createElement("CANVAS");F.width=160;F.height=128;na=F.getContext("2d");oa=na.createImageData(160,128);G=[];for(b=200;0<b;--b){var a=3.5*b,d=1.9*b,e=0.7*b;255<a&&(a=255);255<d&&(d=255);255<e&&(e=255);G.push(a|0,d|0,e|0)}G.push(0,0,0);for(b=1;200>=b;++b)a=0.6*b,d=1.5*b,e=2.7*b,255<
a&&(a=255),255<d&&(d=255),255<e&&(e=255),G.push(a|0,d|0,e|0);H=[];for(b=-100;100>=b;b+=5)H.push(Math.sin(Math.acos(0.0099*b)));b=document.createElement("CANVAS");b.width=I.width;b.height=I.height;b=b.getContext("2d");b.drawImage(I,0,0);J=b.getImageData(0,0,I.width,I.height);K=document.createElement("CANVAS");K.width=K.height=100;qa=K.getContext("2d");L=qa.createImageData(100,100);M.push({e:"#000000",f:"#000000",g:wa,h:1,i:2});M.push({e:"#000000",f:"#000000",g:xa,h:1,i:2});M.push({e:"#000000",f:"#ffffff",
g:ya,h:1,i:2});M.push({e:"#ffffff",f:"#000000",g:za,h:2,i:2});N=document.createElement("CANVAS");N.width=96;N.height=86;Ba=N.getContext("2d");O=Ba.createImageData(96,86);S=[];Ga=[];for(b=0;2>b;++b)a=document.createElement("CANVAS"),a.width=640,a.height=512,d=a.getContext("2d"),d.fillStyle="#441022",d.fillRect(0,0,640,512),S.push(a),Ga.push(d);ma.play()};
onItemsLoader=function(b){Y&&(window.clearTimeout(Y),Y=l);v.fillStyle="#000000";v.fillRect(0,0,640,512);v.fillStyle="#ffffff";b.j==b.total?(v.font="50px sans-serif",v.textAlign="center",v.textBaseline="middle",v.fillText("Loading done!",320,256),v.font="20px sans-serif",v.fillText("Click to start...",320,296),window.setTimeout(onLoadingDone,10),ga.addEventListener("click",onLoadingDone,r)):(v.font="30px sans-serif",v.textAlign="center",v.textBaseline="middle",v.fillText("Loading...",320,256),v.font=
"20px sans-serif",v.fillText((100*(b.j/b.total)).toFixed(0)+" % done",320,296))};
onload=function(){ga=document.getElementById("demo");v=ga.getContext("2d");A=r;window.addEventListener("itemsLoader",onItemsLoader,r);var b=document.createElement("AUDIO");b.controls=c;b.k="auto";Na(b);b.addEventListener("play",Ka,r);b.addEventListener("timeupdate",La,r);b.addEventListener("progress",Pa,r);b.addEventListener("canplay",Qa,r);var a=b.canPlayType("audio/ogg"),d=b.canPlayType("audio/mpeg");if("probably"==a||"maybe"==a&&"probably"!=d)b.src="elekfunk.ogg";else if("probably"==d||"maybe"==
d)b.src="elekfunk.mp3";b.load();ma=b;B=X("muscleMan.png");pa=X("sinePlasma.png");I=X("murky.png");ra=X("intelOutside2.png");wa=X("mMonroe2.png");xa=X("shiffer2.png");ya=X("crawford2.png");za=X("arte2.png");Da=X("artwork.png")};window.onload=onload;
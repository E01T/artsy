var b=!0,n=null,u=!1,aa=Math.random,ba=0,ca=1;function da(a,c,d){return"rgba("+(a|0)+","+(c|0)+","+(d|0)+",1)"}var x;a:{for(var ea=["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame"],fa=0;fa<ea.length;++fa){var ha=ea[fa];if(window[ha]){x=window[ha];break a}}x=function(a){var c=(new Date).getTime(),c=c-c%17+17-c;5>c&&(c=17);window.setTimeout(function(){a.call(window,(new Date).getTime())},c)}}var ia=4*Math.atan(1),ja=Math.max(320,256);
function y(a){return(1-Math.cos(a*ia))/2}
for(var ka,A,B,la,ma,na,C,oa=0,pa,F,qa,G,H,I,ra=0,sa=0,J=0,ta=10,K=1050,ua=9,va=9,wa=32768,xa=[{q:255,o:255,k:255},{q:255,o:64,k:128},{q:255,o:255,k:255},{q:96,o:240,k:255}],ya,N,O,za,P,Aa,Ba,Da,Ea,Fa,Ga,Q,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,R=[],Ra=[{b:31,c:0,d:481,e:0},{b:481,c:0,d:440,e:460},{b:440,c:460,d:256,e:511},{b:256,c:511,d:71,e:460},{b:71,c:460,d:31,e:0},{b:256,c:37,d:440,e:37},{b:440,c:37,d:405,e:431},{b:405,c:431,d:256,e:472},{b:256,c:472,d:256,e:413},{b:256,c:355,d:256,e:264},{b:256,c:208,
d:256,e:150},{b:256,c:94,d:256,e:37},{b:114,c:94,d:397,e:94},{b:397,c:94,d:391,e:150},{b:391,c:150,d:175,e:150},{b:175,c:150,d:180,e:208},{b:180,c:208,d:386,e:208},{b:386,c:208,d:371,e:381},{b:371,c:381,d:256,e:413},{b:256,c:413,d:140,e:381},{b:140,c:381,d:132,e:293},{b:132,c:293,d:188,e:293},{b:188,c:293,d:192,e:338},{b:192,c:338,d:256,e:355},{b:256,c:355,d:318,e:338},{b:318,c:338,d:325,e:264},{b:325,c:264,d:129,e:264},{b:129,c:264,d:114,e:94}],Sa=[],Ta=0,Ua=0,S=80,T=0,Va=b;10<S;){var U=Ra[Ta],Wa=
Math.sqrt((U.d-U.b)*(U.d-U.b)+(U.e-U.c)*(U.e-U.c)),T=Va&&0==T?0.1:0==T?S/2:T+S;if(T>Wa)T=0,Ta=(Ta+1)%Ra.length,0==Ta&&(Va?Va=u:S/=2);else{var Xa=U.b-256+T/Wa*(U.d-U.b);Sa.push({x:Xa,y:U.c-256+T/Wa*(U.e-U.c),s:0.1*Math.abs(Xa)});++Ua}}for(var Ya=[],Za=0;1E3>Za;++Za)Ya.push({x:1024*aa()-512,y:1024*aa()-512,s:1024*aa()-512});function $a(a){return 512<a?a-1024*Math.floor((a+512)/1024):-512>a?a+1024*Math.floor((512-a)/1024):a}
var ab,bb,V,cb,db,eb,fb,gb=[{a:0,x:78,y:0,j:131,i:81},{a:800,x:0,y:91,j:69,i:22},{a:1200,x:85,y:91,j:216,i:22},{a:2100,x:63,y:119,j:91,i:22},{a:2700,x:170,y:119,j:76,i:22},{a:2900,x:74,y:148,j:154,i:28},{a:3100,x:21,y:181,j:93,i:22},{a:3400,x:128,y:181,j:151,i:23}],hb=[{a:0,x:67,y:0,j:70,i:16},{a:800,x:10,y:34,j:48,i:18},{a:1100,x:0,y:53,j:60,i:35},{a:1100,x:63,y:41,j:45,i:47},{a:1900,x:119,y:46,j:84,i:36},{a:2300,x:6,y:102,j:216,i:43},{a:2900,x:41,y:154,j:128,i:100}],ib=[function(a,c,d){A.fillStyle=
"#000000";A.fillRect(0,0,640,512);A.textAlign="center";A.textBaseline="top";2!=a&&A.scale(-0.5,1);switch(a){case 0:a=4300<=c?(4700-c)/400:1;A.fillStyle=da(187*a,170*a,170*a);1E3<=c&&(A.font="50px sans-serif",A.fillText("PRESENTED",-640,40));1800<=c&&(A.font="50px sans-serif",A.fillText("A T",-640,110));2100<=c&&(A.font="50px sans-serif",A.fillText("THE",-768,180));2800<=c&&(A.font="50px sans-serif",A.fillText("WORLD",-544,180));3600<=c&&(A.font="40px sans-serif",A.fillText("O F",-640,270));3900<=
c&&(A.font="bold 100px sans-serif",A.fillText("NOSTRADAMUS",-640,360));break;case 1:a=3300<=c?(3700-c)/400:1;A.fillStyle=da(153*a,136*a,136*a);A.font="50px sans-serif";A.fillText("SO",-736,40);800<=c&&(A.font="50px sans-serif",A.fillText("JUST",-576,40));1100<=c&&(A.fillStyle=da(187*a,170*a,170*a),A.font="bold 100px sans-serif",A.fillText("Straight",-640,120));2E3<=c&&(A.font="50px sans-serif",A.fillText("OFF",-640,260));2650<=c&&(A.font="50px sans-serif",A.fillText("THE",-640,310));2950<=c&&(A.font=
"bold 120px sans-serif",A.fillText("tricycle",-640,360));break;case 2:A.globalAlpha=0.25<d?4/3-4*(d/3):0.1>d?10*d:1,A.drawImage(G,320-(G.width>>1),256-(G.height>>1))}},function(a,c,d,e){A.fillStyle="#240000";A.fillRect(0,0,640,512);d=320+ja*B[wa];for(var l=256+ja*B[(wa+16384)%65536],f=0==a?800*B[32768*c/4E3&65535]:sa,h=0==a?0:ua,j=0==a?0:va;j>=h;--j){var q=50+100*j+f,m=0==a?1:1-(q-50)/1E3,g=1-(q-K-50)/1E3;1<g&&(g=1);var s=xa[j>=ta?(j+ra)%4:0],w=320*g+d*(1-g),g=256*g+l*(1-g);A.beginPath();for(var k=
0;65536>=k;k+=256){var r=320*(1+0.3*B[10*k%65536]),p=w+100/q*r*B[(k+J)%65536],r=g+100/q*r*B[(k+16384+J)%65536];k?A.lineTo(p,r):A.moveTo(p,r)}for(k=65536;0<=k;k-=4096)r=320,p=w+100/q*r*B[(k+J)%65536],r=g+100/q*r*B[(k+16384+J)%65536],A.lineTo(p,r);A.closePath();A.fillStyle="rgba("+(s.q*m+36*(1-m)).toFixed(0)+","+(s.o*m).toFixed(0)+","+(s.k*m).toFixed(0)+",1)";A.fill()}for(d=sa-9*e;0>d;)++ra,d+=100,2<=a&&0<ta&&--ta,1<=a&&0<ua&&--ua,3==a&&c>16E3-1E3*(1050/9)/60&&--va;sa=d|0;J=J+65536-473*e&65535;3==a&&
(0<K?K-=9*e:(K=0,wa=wa+65536-100*e&65535))},function(a,c,d){a=Ba.data;var e=za.data;A.fillStyle="#350000";A.fillRect(0,0,640,50);A.fillRect(0,462,640,50);A.fillStyle="#46051e";A.fillRect(0,50,640,14);A.fillRect(0,448,640,14);A.fillStyle="#000000";A.fillRect(0,64,640,384);var l=0,f=c-15E3;0>f?f=0:3276.8>f&&(f=3276.8*y(5*(f/16384)));var f=0.25*B[5*f&65535],h=c-5E3;0>h&&(h=0);for(var h=1.5*B[7*h&65535],j=15300-c,j=(0<j?j:c?c/d-c:3E4)/2,q=500>j&&0<j,m=96,g=-96,s,w,k=16500<c?1100-c/2%1600:2E4,r=4;0>k;)--r,
k+=120;d=[];for(var p=-96;96>=p;++p)if(0!=p){var t=(h*Math.abs(p)/96+h)/2,z=p/50,D=p+2*(p-0),v=(288-D)/(z-t),E=0>v;E&&(v=(-288-D)/(z-t));z=E?Ga:Fa;t=(v- -150)/150;if(E&&v>k&&500>v&&(!q||v<j)&&0<r)d.push({u:p,r:-160/t-v*f,t:160/t-v*f,height:100/t,alpha:1-v/500}),k+=120,--r;E=u;if(q&&v>j)p<m&&(m=p),p>g&&(g=p,s=-160/t-j*f,w=160/t-j*f);else if(500>v)var ga=v+c/2,L=256*(1-v/500)&511,M=v*f,v=ga/O/4&255,E=0<=v?z[v]:u,ga=ga%O&255;v=-160/t-M;z=160/t-M;for(D=-160;160>D;++D){if(D<v||D>z||E===u||void 0===E)a[l++]=
a[l++]=a[l++]=0;else{var Ca=4*(ga*N+(((D+M)*t+160>>1)%20&4095)+E);a[l++]=e[Ca++]*L>>8;a[l++]=e[Ca++]*L>>8;a[l++]=e[Ca++]*L>>8}a[l++]=255}}Aa.putImageData(Ba,0,0);A.drawImage(P,0,64,640,384);q&&(A.globalAlpha=1-j/500,A.drawImage(Da,2*s+320,2*m+256,2*(w-s),2*(g-m)));for(s=d.length;c=d[--s];)w=2*c.r+320,L=2*(c.t-c.r),M=2*c.u+256,a=c.height,A.globalAlpha=1,A.fillStyle="#000000",A.fillRect(w,M,L,a),A.globalAlpha=c.alpha,A.drawImage(Ea,w,M,L,a)},function(a,c,d){var e=19*c+1E4;A.fillStyle="#441010";A.fillRect(0,
0,640,512);c=160*B[e&65535];var l=160*B[e+32768&65535],f=B[e+16384&65535],e=-f,h=2/(2-f),j=2/(2-e);c*=h;var l=l*j,q=H.width,m=H.height,g=I.width,s=I.height;switch(a){case 0:A.globalAlpha=0.2>d?5*d:0.8>d?1:5-5*d;a=q*h;d=m*h;A.drawImage(H,320+c-a/2,256-d/2,a,d);break;case 1:A.globalAlpha=0.2>d?5*d:0.8>d?1:5-5*d;a=g*h;d=s*h;0<f&&A.drawImage(H,320-q/2,256-m/2);A.drawImage(I,320+c-a/2,256-d/2,a,d);0>=f&&A.drawImage(H,320-q/2,256-m/2);break;case 2:A.globalAlpha=0.1>d?10*d:0.9>d?1:10-10*d,a=q*h,d=m*h,f=
g*j,j*=s,0<e&&A.drawImage(H,320+c-a/2,256-d/2,a,d),A.drawImage(I,320+l-f/2,256-j/2,f,j),0>=e&&A.drawImage(H,320+c-a/2,256-d/2,a,d)}},function(a,c,d){A.fillStyle="#110000";A.fillRect(0,0,640,512);a=Ka.width;var e=Ka.height;A.drawImage(Ka,320-a,256-e,2*a,2*e);a=Ia.data;for(var e=144*B[23*c&65535]+256-112|0,l=144*B[17*c&65535]+256-112|0,f=0,h=0;223>=h;++h)for(var j=0;223>=j;++j){var q=0;a[f++]=255;a[f++]=255;a[f++]=255;var m=Ja[j];0<m&&(m=((h-112)/m|0)+112,0<=m&&223>=m&&(q=Ma[512*(m+l)+j+e]));a[f++]=
q}Ha.putImageData(Ia,0,0);A.drawImage(Q,96,32,448,448);512>c&&(A.fillStyle="#441000",A.fillRect(0,0,640,256-c/2),A.fillRect(0,256+c/2,640,256-c/2));0.95<d&&(A.fillStyle="rgba(0,0,0,"+(20*d-19).toFixed(3)+")",A.fillRect(0,0,640,512))},function(a,c,d){A.fillStyle="#000000";A.fillRect(0,0,640,512);a=R[a];var e=a.p,l=e.width*a.scale,f=e.height*a.scale;A.drawImage(e,320-(l>>1),256-(f>>1),l,f);500>c?(A.globalAlpha=1-c/500,A.fillStyle=a.m,A.fillRect(0,0,640,512)):(c=c/d-c,500>c&&(A.globalAlpha=1-c/500,A.fillStyle=
a.n,A.fillRect(0,0,640,512)))},function(a,c,d){var e=1;0.95<d&&(e=20*(1-d));A.fillStyle="#000000";A.fillRect(0,0,640,512);var l,f,h,j,q,m;switch(a){case 0:l=Sa;f=h=j=0;q=1024-2048*d;m=c/4;break;case 1:l=Ya,q=0,m=c/4,f=0,6E3<c?f=1:2E3<c&&(f=y((c-2E3)/4E3)),j=-c/10+2048*f*B[5*c+3E4&65535],h=1024*f*B[2*c+54E3&65535],f=18E3<c?1:14E3<c?y((c-14E3)/4E3):0,f=3072*f*B[3*(c-14E3)&65535]}m>l.length&&(m=l.length);A.fillStyle="#ffffff";for(a=0;a<m;++a){var g=l[a],s=$a(g.x+f);d=$a(g.y+h);g=$a(g.s+j);g+=q;if(-1E3<
g&&1E3>g){var w=512/(g+1024),s=320+w*s;d=256+w*d;0<s&&(640>s&&0<d&&512>d)&&(g=(512-g)/1024,0>g?g=0:1<g&&(g=1),A.globalAlpha=g*e,A.fillRect(s,d,2,2))}}c-=15100;if(0<=c&&(e=c/480/8|0,240>(c%480|0)))switch(A.globalAlpha=1,A.textAlign="left",A.textBaseline="top",e){case 0:A.fillStyle="#999999";A.font="40px sans-serif";A.fillText("Anders Tornblad",10,10);A.fillStyle="#666666";A.font="30px sans-serif";A.fillText("JavaScript, 2013",10,55);break;case 1:A.fillStyle="#999999";A.font="40px sans-serif";A.fillText("Olivi\u00e9r Bechard (RA)",
10,10);A.fillStyle="#666666";A.font="30px sans-serif";A.fillText("Graphics, 1993",10,55);break;case 2:A.fillStyle="#999999",A.font="40px sans-serif",A.fillText("Fr\u00e9d\u00e9ric Motte (Moby)",10,10),A.fillStyle="#666666",A.font="30px sans-serif",A.fillText("Music, 1993",10,55)}},function(a,c,d){A.fillStyle="#000000";A.fillRect(0,0,640,512);a=65536*(1.5*B[65536*y(d)&65535]-0.5);c=0.5*y(d)+0.5;for(var e=262144*y(d),l=0.8>d?0.5:0.9>d?0.5-2.5*(d-0.8):3.75*y(10*(d-0.9))+0.25,f=80*B[e&65535]+50,h=72*
B[e+23E3&65535],j=50*B[a&65535]+52,q=bb.data,m=db.data,g=0,s=0;100>s;++s)for(var w=0;100>w;++w){var k=s-50,r=w-50,p=k*B[a+16384&65535]+r*B[a&65535],t=r*B[a+16384&65535]-k*B[a&65535],t=t-f,p=p-h,p=p/c,t=t/c,z=k*B[e+16384&65535]+r*B[e&65535],r=r*B[e+16384&65535]-k*B[e&65535],z=z/l,r=r/l,r=r-j,z=z- -40,k=(w+s-200)/200+2*d;0>k&&(k=0);1<k&&(k=1);t=t*(1-k)+r*k;p=p*(1-k)+z*k;t&=127;p&=127;p=4*(128*p+t);m[g++]=q[p++];m[g++]=q[p++];m[g++]=q[p++];m[g++]=255}cb.putImageData(db,0,0);A.drawImage(V,120,56,400,
400);A.fillStyle="#998888";A.textAlign="center";A.font="italic 50px serif";A.textBaseline="top";A.fillText("learning...",320,0);A.font="italic 25px serif";A.textBaseline="top";A.fillText("...by reinventing the wheel",320,456);0.05>d&&(A.fillStyle="rgba(0,0,0,"+(1-20*d).toFixed(3)+")",A.fillRect(0,0,640,512));0.9<d&&(A.fillStyle="rgba(0,0,0,"+(10*d-9).toFixed(3)+")",A.fillRect(0,0,640,512))},function(a,c,d){A.fillStyle="#000000";A.fillRect(0,0,640,512);var e=a?hb:gb,l=a?fb:eb;a=a?0:60;var f=320-l.width/
2;A.globalAlpha=0.9>d?1:10-10*d;for(d=0;d<e.length;++d){var h=e[d];c>h.a&&A.drawImage(l,h.x,h.y,h.j,h.i,h.x+f,2*h.y+a,h.j,2*h.i)}}],jb=[{a:0,f:4700,g:0,h:0},{a:4700,f:8400,g:0,h:1},{a:8400,f:9500,g:0,h:2},{a:9500,f:4E4,g:2,h:0},{a:4E4,f:44E3,g:5,h:0},{a:44E3,f:48E3,g:5,h:1},{a:48E3,f:52E3,g:3,h:0},{a:52E3,f:56E3,g:3,h:1},{a:56E3,f:63300,g:3,h:2},{a:63300,f:82500,g:4,h:0},{a:82500,f:9E4,g:5,h:2},{a:9E4,f:94E3,g:5,h:3},{a:94E3,f:98E3,g:6,h:0},{a:98E3,f:128500,g:6,h:1},{a:128500,f:132500,g:1,h:0},{a:132500,
f:139500,g:1,h:1},{a:139500,f:147E3,g:1,h:2},{a:147E3,f:163E3,g:1,h:3},{a:163E3,f:178300,g:7,h:0},{a:178300,f:182300,g:8,h:0},{a:182300,f:188E3,g:8,h:1},u];
function kb(a){if(na){ca=60*((a-ma)/1E3);ba=a-na;var c=jb[oa];c&&ba>=c.f&&(++oa,c=jb[oa]);if(c){var d=ba-c.a,e=d/(c.f-c.a);pa=ib[c.g];var l=(new Date).getTime();A.globalAlpha=1;A.save();pa.call(this,c.h,d,e,ca);A.restore()}else F=u;c=(22-((new Date).getTime()-l)-10*ca)/200;0<c&&(c*=0.005);c=la+c;1<c?c=1:0.1>c&&(c=0.1);la=c}C&&(1>C&&(na=a-1E3*C-250),ma=a);F?x(kb):(a=document.createEvent("Event"),a.initEvent("demoDone",b,b),window.dispatchEvent(a))}function lb(){F=b;x(kb)}
function mb(){C=this.currentTime}var W=[],X=0;function nb(a){W.push(a);++X;a=document.createEvent("Event");a.initEvent("itemsLoader",b,b);a.total=X;a.l=X-W.length;window.dispatchEvent(a)}function ob(a){for(var c=[],d=0;d<W.length;++d)W[d]!=a&&c.push(W[d]);W=c;a=document.createEvent("Event");a.initEvent("itemsLoader",b,b);a.total=X;a.l=X-W.length;window.dispatchEvent(a)}var Y=n;
function pb(){Y&&window.clearTimeout(Y);var a=this;Y=window.setTimeout(function(){Y=n;a.removeEventListener("progress",pb,u);ob(a)},2E3)}function qb(){Y&&(window.clearTimeout(Y),Y=n);this.removeEventListener("progress",pb,u);ob(this)}function rb(){ob(this)}function Z(a){var c=new Image;nb(c);c.addEventListener("load",rb,u);c.src=a+"?ts="+(new Date).getTime();return c}var $=n;
onLoadingDone=function(){$&&(window.clearTimeout($),$=n);for(var a=[],c=4*Math.atan(1),d=0;65535>=d;++d)a.push(Math.sin(d*c/32768));B=a;Q=document.createElement("CANVAS");Q.width=Q.height=224;Ha=Q.getContext("2d");Ia=Ha.createImageData(224,224);c=[];for(a=0;224>=a;++a)c.push(Math.sin(Math.acos(a/112-1)));Ja=c;a=document.createElement("CANVAS");a.width=512;a.height=512;a=a.getContext("2d");a.clearRect(0,0,512,512);a.drawImage(La,0,0);c=a.getImageData(0,0,512,512).data;Ma=Array(262144);for(var e=d=
0;512>e;++e)for(a=0;512>a;++a)Ma[d]=128<c[4*d]?112:0,++d;R.push({m:"#ffffff",n:"#000000",p:Na,scale:2});R.push({m:"#000000",n:"#441010",p:Oa,scale:2});R.push({m:"#ffffff",n:"#000000",p:Pa,scale:2});R.push({m:"#000000",n:"#000000",p:Qa,scale:2});N=ya.width;O=ya.height;a=document.createElement("CANVAS");a.width=N;a.height=O;a=a.getContext("2d");a.drawImage(ya,0,0,N,O);za=a.getImageData(0,0,N,O);P=document.createElement("CANVAS");P.width=320;P.height=192;Aa=P.getContext("2d");Ba=Aa.createImageData(320,
192);Fa=[];Ga=[];for(a=0;136>a;++a)c="    aaa aaaabbbb ccccaabbccccbddddaaaaaabbbbccdda abdbccdccc    caaabbbbbaaabbbb ccccaabbccccbdaaabbcccdaaa aaaabbbbaaabbcccdaaabbabbcab"[a]," "==c?Fa.push(u):Fa.push(20*(c.charCodeAt(0)-97)),c="    aaa aabbccddadddddaabbccdd aaabbcccdaaa aaaabbbb ccccbbb    cc ddddaaddddaaaaaabbbbccdda abccccaabbccccbddddaaaaaabbccddadddddaabbcc"[a]," "==c?Ga.push(u):Ga.push(20*(c.charCodeAt(0)-97));a=document.createElement("CANVAS");a.width=a.height=128;a=a.getContext("2d");
a.drawImage(ab,0,0);bb=a.getImageData(0,0,128,128);V=document.createElement("CANVAS");V.width=100;V.height=100;cb=V.getContext("2d");db=cb.createImageData(100,100);qa.play()};
onItemsLoader=function(a){$&&(window.clearTimeout($),$=n);A.fillStyle="#000000";A.fillRect(0,0,640,512);A.fillStyle="#000073";A.strokeStyle="#000073";A.lineWidth=50;A.lineCap="round";A.beginPath();A.moveTo(120,256);A.lineTo(520,256);A.stroke();a.l<a.total&&(A.strokeStyle="#000000",A.lineWidth=40,A.beginPath(),A.moveTo(120,256),A.lineTo(520,256),A.stroke(),A.strokeStyle="#000073",A.lineWidth=41,A.beginPath(),A.moveTo(120,256),A.lineTo(120+400*a.l/a.total,256),A.stroke());a.l==a.total&&(A.textAlign=
"center",A.textBaseline="middle",A.font="20px sans-serif",A.fillText("Click to start...",320,296),window.setTimeout(onLoadingDone,1),ka.addEventListener("click",onLoadingDone,u))};onDemoDone=function(){window.location.href="part-2/"};
onload=function(){ka=document.getElementById("demo");A=ka.getContext("2d");F=u;window.addEventListener("itemsLoader",onItemsLoader,u);window.addEventListener("demoDone",onDemoDone,u);var a=document.createElement("AUDIO");a.controls=b;a.v="auto";nb(a);a.addEventListener("play",lb,u);a.addEventListener("timeupdate",mb,u);a.addEventListener("progress",pb,u);a.addEventListener("canplay",qb,u);var c=a.canPlayType("audio/ogg"),d=a.canPlayType("audio/mpeg");if("probably"==c||"maybe"==c&&"probably"!=d)a.src=
"livin-insanity.ogg";else if("probably"==d||"maybe"==d)a.src="livin-insanity.mp3";a.load();qa=a;G=Z("whaaaaat.png");H=Z("biteArte2.png");I=Z("deadChicken2.png");Ka=Z("globe.png");La=Z("globeDoodles.png");Na=Z("sanity1.png");Oa=Z("madman.png");ya=Z("tunnelBits.png");Da=Z("tunnelWall.png");Ea=Z("tunnelHanger.png");Pa=Z("einstein.png");Qa=Z("sanity2.png");ab=Z("seventies.png");eb=Z("hailSalvadore.png");fb=Z("trueArtists.png")};window.onload=onload;
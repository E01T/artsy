var b=!0,l=null,v=!1,ba=Math.random,ca=0,da=1;function ea(a,c,d){return"rgba("+(a|0)+","+(c|0)+","+(d|0)+",1)"}var w;a:{for(var fa=["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame"],ga=0;ga<fa.length;++ga){var ha=fa[ga];if(window[ha]){w=window[ha];break a}}w=function(a){var c=(new Date).getTime(),c=c-c%17+17-c;5>c&&(c=17);window.setTimeout(function(){a.call(window,(new Date).getTime())},c)}}var ia=4*Math.atan(1),ja=Math.max(320,256);
function x(a){return(1-Math.cos(a*ia))/2}
for(var ka,y,z,la,ma,na,oa,pa=0,qa,ra,sa,B,C,D,ta=0,ua=0,E=0,va=10,F=1050,wa=9,xa=9,G=32768,Ba=[{p:255,n:255,k:255},{p:255,n:64,k:128},{p:255,n:255,k:255},{p:96,n:240,k:255}],H,I,J,Ca,K,Da,Ea,Fa,L,M,N,O,Ga,Ha,P,Ia,Ja,Ka,La,Ma,Na,Q=[],Oa=[{b:31,c:0,d:481,e:0},{b:481,c:0,d:440,e:460},{b:440,c:460,d:256,e:511},{b:256,c:511,d:71,e:460},{b:71,c:460,d:31,e:0},{b:256,c:37,d:440,e:37},{b:440,c:37,d:405,e:431},{b:405,c:431,d:256,e:472},{b:256,c:472,d:256,e:413},{b:256,c:355,d:256,e:264},{b:256,c:208,d:256,
e:150},{b:256,c:94,d:256,e:37},{b:114,c:94,d:397,e:94},{b:397,c:94,d:391,e:150},{b:391,c:150,d:175,e:150},{b:175,c:150,d:180,e:208},{b:180,c:208,d:386,e:208},{b:386,c:208,d:371,e:381},{b:371,c:381,d:256,e:413},{b:256,c:413,d:140,e:381},{b:140,c:381,d:132,e:293},{b:132,c:293,d:188,e:293},{b:188,c:293,d:192,e:338},{b:192,c:338,d:256,e:355},{b:256,c:355,d:318,e:338},{b:318,c:338,d:325,e:264},{b:325,c:264,d:129,e:264},{b:129,c:264,d:114,e:94}],Pa=[],R=0,Qa=0,S=80,T=0,Ra=b;10<S;){var U=Oa[R],Sa=Math.sqrt((U.d-
U.b)*(U.d-U.b)+(U.e-U.c)*(U.e-U.c)),T=Ra&&0==T?0.1:0==T?S/2:T+S;if(T>Sa)T=0,R=(R+1)%Oa.length,0==R&&(Ra?Ra=v:S/=2);else{var Ta=U.b-256+T/Sa*(U.d-U.b);Pa.push({x:Ta,y:U.c-256+T/Sa*(U.e-U.c),r:0.1*Math.abs(Ta)});++Qa}}for(var Ua=[],Va=0;1E3>Va;++Va)Ua.push({x:1024*ba()-512,y:1024*ba()-512,r:1024*ba()-512});function Wa(a){return 512<a?a-1024*Math.floor((a+512)/1024):-512>a?a+1024*Math.floor((512-a)/1024):a}
var Xa,Ya,V,Za,$a,ab,bb,cb=[{a:0,x:78,y:0,j:131,i:81},{a:800,x:0,y:91,j:69,i:22},{a:1200,x:85,y:91,j:216,i:22},{a:2100,x:63,y:119,j:91,i:22},{a:2700,x:170,y:119,j:76,i:22},{a:2900,x:74,y:148,j:154,i:28},{a:3100,x:21,y:181,j:93,i:22},{a:3400,x:128,y:181,j:151,i:23}],db=[{a:0,x:67,y:0,j:70,i:16},{a:800,x:10,y:34,j:48,i:18},{a:1100,x:0,y:53,j:60,i:35},{a:1100,x:63,y:41,j:45,i:47},{a:1900,x:119,y:46,j:84,i:36},{a:2300,x:6,y:102,j:216,i:43},{a:2900,x:41,y:154,j:128,i:100}],eb=[function(a,c,d){y.fillStyle=
"#000000";y.fillRect(0,0,640,512);y.textAlign="center";y.textBaseline="top";2!=a&&y.scale(-0.5,1);switch(a){case 0:a=4300<=c?(4700-c)/400:1;y.fillStyle=ea(187*a,170*a,170*a);1E3<=c&&(y.font="50px sans-serif",y.fillText("PRESENTED",-640,40));1800<=c&&(y.font="50px sans-serif",y.fillText("A T",-640,110));2100<=c&&(y.font="50px sans-serif",y.fillText("THE",-768,180));2800<=c&&(y.font="50px sans-serif",y.fillText("WORLD",-544,180));3600<=c&&(y.font="40px sans-serif",y.fillText("O F",-640,270));3900<=
c&&(y.font="bold 100px sans-serif",y.fillText("NOSTRADAMUS",-640,360));break;case 1:a=3300<=c?(3700-c)/400:1;y.fillStyle=ea(153*a,136*a,136*a);y.font="50px sans-serif";y.fillText("SO",-736,40);800<=c&&(y.font="50px sans-serif",y.fillText("JUST",-576,40));1100<=c&&(y.fillStyle=ea(187*a,170*a,170*a),y.font="bold 100px sans-serif",y.fillText("Straight",-640,120));2E3<=c&&(y.font="50px sans-serif",y.fillText("OFF",-640,260));2650<=c&&(y.font="50px sans-serif",y.fillText("THE",-640,310));2950<=c&&(y.font=
"bold 120px sans-serif",y.fillText("tricycle",-640,360));break;case 2:y.globalAlpha=0.25<d?4/3-4*(d/3):0.1>d?10*d:1,y.drawImage(B,320-(B.width>>1),256-(B.height>>1))}},function(a,c,d,f){y.fillStyle="#240000";y.fillRect(0,0,640,512);d=320+ja*z[G];for(var m=256+ja*z[(G+16384)%65536],e=0==a?800*z[32768*c/4E3&65535]:ua,h=0==a?0:wa,n=0==a?0:xa;n>=h;--n){var r=50+100*n+e,p=0==a?1:1-(r-50)/1E3,g=1-(r-F-50)/1E3;1<g&&(g=1);var t=Ba[n>=va?(n+ta)%4:0],k=320*g+d*(1-g),g=256*g+m*(1-g);y.beginPath();for(var q=
0;65536>=q;q+=256){var j=320*(1+0.3*z[10*q%65536]),s=k+100/r*j*z[(q+E)%65536],j=g+100/r*j*z[(q+16384+E)%65536];q?y.lineTo(s,j):y.moveTo(s,j)}for(q=65536;0<=q;q-=4096)j=320,s=k+100/r*j*z[(q+E)%65536],j=g+100/r*j*z[(q+16384+E)%65536],y.lineTo(s,j);y.closePath();y.fillStyle="rgba("+(t.p*p+36*(1-p)).toFixed(0)+","+(t.n*p).toFixed(0)+","+(t.k*p).toFixed(0)+",1)";y.fill()}for(d=ua-9*f;0>d;)++ta,d+=100,2<=a&&0<va&&--va,1<=a&&0<wa&&--wa,3==a&&c>16E3-1E3*(1050/9)/60&&--xa;ua=d|0;E=E+65536-473*f&65535;3==a&&
(0<F?F-=9*f:(F=0,G=G+65536-100*f&65535))},function(a,c,d){a=Ea.data;var f=Ca.data;y.fillStyle="#350000";y.fillRect(0,0,640,50);y.fillRect(0,462,640,50);y.fillStyle="#46051e";y.fillRect(0,50,640,14);y.fillRect(0,448,640,14);y.fillStyle="#000000";y.fillRect(0,64,640,384);var m=0,e=c-5E3;0>e?e=0:3276.8>e&&(e=3276.8*x(5*(e/16384)));var e=0.25*z[5*e&65535],h=c-1E4;0>h&&(h=0);var h=1.5*z[7*h&65535],n=15300-c;d=(0<n?n:c?c/d-c:3E4)/3;for(var n=500>d&&0<d,r=96,p=-96,g,t,k=-96;96>=k;++k)if(0!=k){var q=(h*Math.abs(k)/
96+h)/2,j=k/50,s=k+2*(k-0),u=(288-s)/(j-q),A=0>u;A&&(u=(-288-s)/(j-q));q=A?M:L;96==k&&console.log("k="+j+"m="+s+"z="+u);j=(u- -150)/150;s=v;if(n&&u>d)k<r&&(r=k),k>p&&(p=k,g=-160/j-d*e,t=160/j-d*e);else if(500>u)var aa=u+c/3,ya=256*(1-u/500)&511,za=u*e,u=aa/J/4&255,s=0<=u?q[u]:v,aa=aa%J&255;u=-160/j-za;q=160/j-za;for(A=-160;160>A;++A){if(A<u||A>q||s===v||void 0===s)a[m++]=a[m++]=a[m++]=0;else{var Aa=4*(aa*I+(((A+za)*j+160>>1)%20&4095)+s);a[m++]=f[Aa++]*ya>>8;a[m++]=f[Aa++]*ya>>8;a[m++]=f[Aa++]*ya>>
8}a[m++]=255}}Da.putImageData(Ea,0,0);y.drawImage(K,0,64,640,384);n&&(y.globalAlpha=1-d/500,y.drawImage(Fa,2*g+320,2*r+256,2*(t-g),2*(p-r)))},function(a,c,d){var f=19*c+1E4;y.fillStyle="#441010";y.fillRect(0,0,640,512);c=160*z[f&65535];var m=160*z[f+32768&65535],e=z[f+16384&65535],f=-e,h=2/(2-e),n=2/(2-f);c*=h;var m=m*n,r=C.width,p=C.height,g=D.width,t=D.height;switch(a){case 0:y.globalAlpha=0.2>d?5*d:0.8>d?1:5-5*d;a=r*h;d=p*h;y.drawImage(C,320+c-a/2,256-d/2,a,d);break;case 1:y.globalAlpha=0.2>d?
5*d:0.8>d?1:5-5*d;a=g*h;d=t*h;0<e&&y.drawImage(C,320-r/2,256-p/2);y.drawImage(D,320+c-a/2,256-d/2,a,d);0>=e&&y.drawImage(C,320-r/2,256-p/2);break;case 2:y.globalAlpha=0.1>d?10*d:0.9>d?1:10-10*d,a=r*h,d=p*h,e=g*n,n*=t,0<f&&y.drawImage(C,320+c-a/2,256-d/2,a,d),y.drawImage(D,320+m-e/2,256-n/2,e,n),0>=f&&y.drawImage(C,320+c-a/2,256-d/2,a,d)}},function(a,c,d){y.fillStyle="#110000";y.fillRect(0,0,640,512);a=P.width;var f=P.height;y.drawImage(P,320-a,256-f,2*a,2*f);a=Ga.data;for(var f=144*z[23*c&65535]+
256-112|0,m=144*z[17*c&65535]+256-112|0,e=0,h=0;223>=h;++h)for(var n=0;223>=n;++n){var r=0;a[e++]=255;a[e++]=255;a[e++]=255;var p=Ha[n];0<p&&(p=((h-112)/p|0)+112,0<=p&&223>=p&&(r=Ja[512*(p+m)+n+f]));a[e++]=r}O.clearRect(0,0,224,224);O.putImageData(Ga,0,0);y.drawImage(N,96,32,448,448);512>c&&(y.fillStyle="#441000",y.fillRect(0,0,640,256-c/2),y.fillRect(0,256+c/2,640,256-c/2));0.95<d&&(y.fillStyle="rgba(0,0,0,"+(20*d-19).toFixed(3)+")",y.fillRect(0,0,640,512))},function(a,c,d){y.fillStyle="#000000";
y.fillRect(0,0,640,512);a=Q[a];var f=a.o,m=f.width*a.scale,e=f.height*a.scale;y.drawImage(f,320-(m>>1),256-(e>>1),m,e);500>c?(y.globalAlpha=1-c/500,y.fillStyle=a.l,y.fillRect(0,0,640,512)):(c=c/d-c,500>c&&(y.globalAlpha=1-c/500,y.fillStyle=a.m,y.fillRect(0,0,640,512)))},function(a,c,d){var f=1;0.95<d&&(f=20*(1-d));y.fillStyle="#000000";y.fillRect(0,0,640,512);var m,e,h,n,r,p;switch(a){case 0:m=Pa;e=h=n=0;r=1024-2048*d;p=c/4;break;case 1:m=Ua,r=0,p=c/4,e=0,6E3<c?e=1:2E3<c&&(e=x((c-2E3)/4E3)),n=-c/
10+2048*e*z[5*c+3E4&65535],h=1024*e*z[2*c+54E3&65535],e=18E3<c?1:14E3<c?x((c-14E3)/4E3):0,e=3072*e*z[3*(c-14E3)&65535]}p>m.length&&(p=m.length);y.fillStyle="#ffffff";for(a=0;a<p;++a){var g=m[a],t=Wa(g.x+e);d=Wa(g.y+h);g=Wa(g.r+n);g+=r;if(-1E3<g&&1E3>g){var k=512/(g+1024),t=320+k*t;d=256+k*d;0<t&&(640>t&&0<d&&512>d)&&(g=(512-g)/1024,0.2>g?g=0.2:1<g&&(g=1),y.globalAlpha=g*f,y.fillRect(t,d,2,2))}}c-=15100;if(0<=c&&(f=c/480/8|0,240>(c%480|0)))switch(y.globalAlpha=1,y.textAlign="left",y.textBaseline="top",
f){case 0:y.fillStyle="#999999";y.font="40px sans-serif";y.fillText("Anders Tornblad",10,10);y.fillStyle="#666666";y.font="30px sans-serif";y.fillText("JavaScript, 2013",10,55);break;case 1:y.fillStyle="#999999";y.font="40px sans-serif";y.fillText("Olivi\u00e9r Bechard (RA)",10,10);y.fillStyle="#666666";y.font="30px sans-serif";y.fillText("Graphics, 1993",10,55);break;case 2:y.fillStyle="#999999",y.font="40px sans-serif",y.fillText("Fr\u00e9d\u00e9ric Motte (Moby)",10,10),y.fillStyle="#666666",y.font=
"30px sans-serif",y.fillText("Music, 1993",10,55)}},function(a,c,d){y.fillStyle="#000000";y.fillRect(0,0,640,512);a=65536*z[65536*x(d)&65535];c=196608*x(d);for(var f=0.8>d?0.5:0.9>d?0.5-2.5*(d-0.8):3.75*x(10*(d-0.9))+0.25,m=80*z[c&65535]+50,e=72*z[c+23E3&65535],h=50*z[a&65535]+52,n=Ya.data,r=$a.data,p=0,g=0;100>g;++g)for(var t=0;100>t;++t){var k=g-50,q=t-50,j=k*z[a+16384&65535]+q*z[a&65535],s=q*z[a+16384&65535]-k*z[a&65535],s=s-m,j=j-e,j=j/1,s=s/1,u=k*z[c+16384&65535]+q*z[c&65535],q=q*z[c+16384&65535]-
k*z[c&65535],u=u/f,q=q/f,q=q-h,u=u- -40,k=(t+g-200)/200+2*d;0>k&&(k=0);1<k&&(k=1);s=s*(1-k)+q*k;j=j*(1-k)+u*k;s&=127;j&=127;j=4*(128*j+s);r[p++]=n[j++];r[p++]=n[j++];r[p++]=n[j++];r[p++]=255}Za.putImageData($a,0,0);y.drawImage(V,120,56,400,400);y.fillStyle="#998888";y.textAlign="center";y.font="italic 40px serif";y.textBaseline="top";y.fillText("a glimpse from 1974",320,0);0.05>d&&(y.fillStyle="rgba(0,0,0,"+(1-20*d).toFixed(3)+")",y.fillRect(0,0,640,512));0.9<d&&(y.fillStyle="rgba(0,0,0,"+(10*d-9).toFixed(3)+
")",y.fillRect(0,0,640,512))},function(a,c,d){y.fillStyle="#000000";y.fillRect(0,0,640,512);var f=a?db:cb,m=a?bb:ab;a=a?0:60;var e=320-m.width/2;y.globalAlpha=0.9>d?1:10-10*d;for(d=0;d<f.length;++d){var h=f[d];c>h.a&&y.drawImage(m,h.x,h.y,h.j,h.i,h.x+e,2*h.y+a,h.j,2*h.i)}}],fb=[{a:0,f:4700,g:0,h:0},{a:4700,f:8400,g:0,h:1},{a:8400,f:9500,g:0,h:2},{a:9500,f:4E4,g:2,h:0},{a:4E4,f:44E3,g:5,h:0},{a:44E3,f:48E3,g:5,h:1},{a:48E3,f:52E3,g:3,h:0},{a:52E3,f:56E3,g:3,h:1},{a:56E3,f:63300,g:3,h:2},{a:63300,f:82500,
g:4,h:0},{a:82500,f:9E4,g:5,h:2},{a:9E4,f:94E3,g:5,h:3},{a:94E3,f:98E3,g:6,h:0},{a:98E3,f:128500,g:6,h:1},{a:128500,f:132500,g:1,h:0},{a:132500,f:139500,g:1,h:1},{a:139500,f:147E3,g:1,h:2},{a:147E3,f:163E3,g:1,h:3},{a:163E3,f:178300,g:7,h:0},{a:178300,f:182300,g:8,h:0},{a:182300,f:188E3,g:8,h:1},v];
function gb(a){if(na){da=60*((a-ma)/1E3);ca=a-na;var c=fb[pa];c&&ca>=c.f&&(++pa,c=fb[pa]);if(c){var d=ca-c.a,f=d/(c.f-c.a);qa=eb[c.g];var m=(new Date).getTime();y.globalAlpha=1;y.save();qa.call(this,c.h,d,f,da);y.restore()}c=(22-((new Date).getTime()-m)-10*da)/200;0<c&&(c*=0.005);c=la+c;1<c?c=1:0.1>c&&(c=0.1);la=c}oa&&(ma||(na=a-1E3*oa),ma=a);ra&&w(gb)}function hb(){ra=b;w(gb)}function ib(){oa=this.currentTime}var W=[],X=0;
function jb(a){W.push(a);++X;a=document.createEvent("Event");a.initEvent("itemsLoader",b,b);a.total=X;a.q=X-W.length;window.dispatchEvent(a)}function kb(a){for(var c=[],d=0;d<W.length;++d)W[d]!=a&&c.push(W[d]);W=c;a=document.createEvent("Event");a.initEvent("itemsLoader",b,b);a.total=X;a.q=X-W.length;window.dispatchEvent(a)}var Y=l;function lb(){Y&&window.clearTimeout(Y);var a=this;Y=window.setTimeout(function(){Y=l;a.removeEventListener("progress",lb,v);kb(a)},2E3)}
function mb(){Y&&(window.clearTimeout(Y),Y=l);this.removeEventListener("progress",lb,v);kb(this)}function nb(){kb(this)}function Z(a){var c=new Image;jb(c);c.addEventListener("load",nb,v);c.src=a+"?ts="+(new Date).getTime();return c}var $=l;
onLoadingDone=function(){$&&(window.clearTimeout($),$=l);for(var a=[],c=4*Math.atan(1),d=0;65535>=d;++d)a.push(Math.sin(d*c/32768));z=a;N=document.createElement("CANVAS");N.width=N.height=224;O=N.getContext("2d");Ga=O.createImageData(224,224);c=[];for(a=0;224>=a;++a)c.push(Math.sin(Math.acos(a/112-1)));Ha=c;a=document.createElement("CANVAS");a.width=512;a.height=512;a=a.getContext("2d");a.clearRect(0,0,512,512);a.drawImage(Ia,0,0);c=a.getImageData(0,0,512,512).data;Ja=Array(262144);for(var f=d=0;512>
f;++f)for(a=0;512>a;++a)Ja[d]=128<c[4*d]?112:0,++d;Q.push({l:"#ffffff",m:"#000000",o:Ka,scale:2});Q.push({l:"#000000",m:"#441010",o:La,scale:2});Q.push({l:"#ffffff",m:"#000000",o:Ma,scale:2});Q.push({l:"#000000",m:"#000000",o:Na,scale:2});I=H.width;J=H.height;a=document.createElement("CANVAS");a.width=I;a.height=J;a=a.getContext("2d");a.drawImage(H,0,0,I,J);Ca=a.getImageData(0,0,I,J);K=document.createElement("CANVAS");K.width=320;K.height=192;Da=K.getContext("2d");Ea=Da.createImageData(320,192);L=
[];M=[];for(a=0;94>a;++a)c="    aaa aaaabbbb ccccaabbccccbddddaaaaaabbbbccdda abdbccddccdcccaaabbbbbaaabbbb ccccaabbccccbd"[a]," "==c?L.push(v):L.push(20*(c.charCodeAt(0)-97)),c="    aaa aabbccddadddddaabbccdd aaabbcccdaaa aaaabbbb ccccaabbcccc ddddaaddddaaaaaabbbbccdda ab"[a]," "==c?M.push(v):M.push(20*(c.charCodeAt(0)-97));a=document.createElement("CANVAS");a.width=a.height=128;a=a.getContext("2d");a.drawImage(Xa,0,0);Ya=a.getImageData(0,0,128,128);V=document.createElement("CANVAS");V.width=100;
V.height=100;Za=V.getContext("2d");$a=Za.createImageData(100,100);sa.play()};
onItemsLoader=function(a){$&&(window.clearTimeout($),$=l);y.fillStyle="#000000";y.fillRect(0,0,640,512);y.fillStyle="#ffffff";a.q==a.total?(y.font="50px sans-serif",y.textAlign="center",y.textBaseline="middle",y.fillText("Loading done!",320,256),y.font="20px sans-serif",y.fillText("Click to start...",320,296),window.setTimeout(onLoadingDone,10),ka.addEventListener("click",onLoadingDone,v)):(y.font="30px sans-serif",y.textAlign="center",y.textBaseline="middle",y.fillText("Loading...",320,256),y.font=
"20px sans-serif",y.fillText((100*(a.q/a.total)).toFixed(0)+" % done",320,296))};
onload=function(){ka=document.getElementById("demo");y=ka.getContext("2d");ra=v;window.addEventListener("itemsLoader",onItemsLoader,v);var a=document.createElement("AUDIO");a.controls=b;a.s="auto";jb(a);a.addEventListener("play",hb,v);a.addEventListener("timeupdate",ib,v);a.addEventListener("progress",lb,v);a.addEventListener("canplay",mb,v);var c=a.canPlayType("audio/ogg"),d=a.canPlayType("audio/mpeg");if("probably"==c||"maybe"==c&&"probably"!=d)a.src="livin-insanity.ogg";else if("probably"==d||
"maybe"==d)a.src="livin-insanity.mp3";a.load();sa=a;B=Z("whaaaaat.png");C=Z("biteArte2.png");D=Z("deadChicken2.png");P=Z("globe.png");Ia=Z("globeDoodles.png");Ka=Z("sanity1.png");La=Z("madman.png");H=Z("tunnelBits.png");Fa=Z("tunnelWall.png");Ma=Z("einstein.png");Na=Z("sanity2.png");Xa=Z("seventies.png");ab=Z("hailSalvadore.png");bb=Z("trueArtists.png")};window.onload=onload;
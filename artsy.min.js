var b=!0,l=null,v=!1,aa=Math.random,ba=0,ca=1;function da(a,c,d){return"rgba("+(a|0)+","+(c|0)+","+(d|0)+",1)"}var x;a:{for(var ea=["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame"],fa=0;fa<ea.length;++fa){var ha=ea[fa];if(window[ha]){x=window[ha];break a}}x=function(a){var c=(new Date).getTime(),c=c-c%17+17-c;5>c&&(c=17);window.setTimeout(function(){a.call(window,(new Date).getTime())},c)}}var ia=4*Math.atan(1),ja=Math.max(320,256);
function y(a){return(1-Math.cos(a*ia))/2}
for(var ka,z,A,la,ma,na,D,oa=0,pa,qa,ra,E,F,G,sa=0,ta=0,H=0,ua=10,I=1050,va=9,wa=9,J=32768,xa=[{p:255,n:255,k:255},{p:255,n:64,k:128},{p:255,n:255,k:255},{p:96,n:240,k:255}],ya,N,O,za,P,Aa,Ba,Da,Ea,Fa,Ga,Q,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,R=[],Ra=[{b:31,c:0,d:481,e:0},{b:481,c:0,d:440,e:460},{b:440,c:460,d:256,e:511},{b:256,c:511,d:71,e:460},{b:71,c:460,d:31,e:0},{b:256,c:37,d:440,e:37},{b:440,c:37,d:405,e:431},{b:405,c:431,d:256,e:472},{b:256,c:472,d:256,e:413},{b:256,c:355,d:256,e:264},{b:256,c:208,
d:256,e:150},{b:256,c:94,d:256,e:37},{b:114,c:94,d:397,e:94},{b:397,c:94,d:391,e:150},{b:391,c:150,d:175,e:150},{b:175,c:150,d:180,e:208},{b:180,c:208,d:386,e:208},{b:386,c:208,d:371,e:381},{b:371,c:381,d:256,e:413},{b:256,c:413,d:140,e:381},{b:140,c:381,d:132,e:293},{b:132,c:293,d:188,e:293},{b:188,c:293,d:192,e:338},{b:192,c:338,d:256,e:355},{b:256,c:355,d:318,e:338},{b:318,c:338,d:325,e:264},{b:325,c:264,d:129,e:264},{b:129,c:264,d:114,e:94}],Sa=[],Ta=0,Ua=0,S=80,T=0,Va=b;10<S;){var U=Ra[Ta],Wa=
Math.sqrt((U.d-U.b)*(U.d-U.b)+(U.e-U.c)*(U.e-U.c)),T=Va&&0==T?0.1:0==T?S/2:T+S;if(T>Wa)T=0,Ta=(Ta+1)%Ra.length,0==Ta&&(Va?Va=v:S/=2);else{var Xa=U.b-256+T/Wa*(U.d-U.b);Sa.push({x:Xa,y:U.c-256+T/Wa*(U.e-U.c),s:0.1*Math.abs(Xa)});++Ua}}for(var Ya=[],Za=0;1E3>Za;++Za)Ya.push({x:1024*aa()-512,y:1024*aa()-512,s:1024*aa()-512});function $a(a){return 512<a?a-1024*Math.floor((a+512)/1024):-512>a?a+1024*Math.floor((512-a)/1024):a}
var ab,bb,V,cb,db,eb,fb,gb=[{a:0,x:78,y:0,j:131,i:81},{a:800,x:0,y:91,j:69,i:22},{a:1200,x:85,y:91,j:216,i:22},{a:2100,x:63,y:119,j:91,i:22},{a:2700,x:170,y:119,j:76,i:22},{a:2900,x:74,y:148,j:154,i:28},{a:3100,x:21,y:181,j:93,i:22},{a:3400,x:128,y:181,j:151,i:23}],hb=[{a:0,x:67,y:0,j:70,i:16},{a:800,x:10,y:34,j:48,i:18},{a:1100,x:0,y:53,j:60,i:35},{a:1100,x:63,y:41,j:45,i:47},{a:1900,x:119,y:46,j:84,i:36},{a:2300,x:6,y:102,j:216,i:43},{a:2900,x:41,y:154,j:128,i:100}],ib=[function(a,c,d){z.fillStyle=
"#000000";z.fillRect(0,0,640,512);z.textAlign="center";z.textBaseline="top";2!=a&&z.scale(-0.5,1);switch(a){case 0:a=4300<=c?(4700-c)/400:1;z.fillStyle=da(187*a,170*a,170*a);1E3<=c&&(z.font="50px sans-serif",z.fillText("PRESENTED",-640,40));1800<=c&&(z.font="50px sans-serif",z.fillText("A T",-640,110));2100<=c&&(z.font="50px sans-serif",z.fillText("THE",-768,180));2800<=c&&(z.font="50px sans-serif",z.fillText("WORLD",-544,180));3600<=c&&(z.font="40px sans-serif",z.fillText("O F",-640,270));3900<=
c&&(z.font="bold 100px sans-serif",z.fillText("NOSTRADAMUS",-640,360));break;case 1:a=3300<=c?(3700-c)/400:1;z.fillStyle=da(153*a,136*a,136*a);z.font="50px sans-serif";z.fillText("SO",-736,40);800<=c&&(z.font="50px sans-serif",z.fillText("JUST",-576,40));1100<=c&&(z.fillStyle=da(187*a,170*a,170*a),z.font="bold 100px sans-serif",z.fillText("Straight",-640,120));2E3<=c&&(z.font="50px sans-serif",z.fillText("OFF",-640,260));2650<=c&&(z.font="50px sans-serif",z.fillText("THE",-640,310));2950<=c&&(z.font=
"bold 120px sans-serif",z.fillText("tricycle",-640,360));break;case 2:z.globalAlpha=0.25<d?4/3-4*(d/3):0.1>d?10*d:1,z.drawImage(E,320-(E.width>>1),256-(E.height>>1))}},function(a,c,d,f){z.fillStyle="#240000";z.fillRect(0,0,640,512);d=320+ja*A[J];for(var m=256+ja*A[(J+16384)%65536],e=0==a?800*A[32768*c/4E3&65535]:ta,h=0==a?0:va,j=0==a?0:wa;j>=h;--j){var q=50+100*j+e,k=0==a?1:1-(q-50)/1E3,g=1-(q-I-50)/1E3;1<g&&(g=1);var t=xa[j>=ua?(j+sa)%4:0],s=320*g+d*(1-g),g=256*g+m*(1-g);z.beginPath();for(var n=
0;65536>=n;n+=256){var p=320*(1+0.3*A[10*n%65536]),r=s+100/q*p*A[(n+H)%65536],p=g+100/q*p*A[(n+16384+H)%65536];n?z.lineTo(r,p):z.moveTo(r,p)}for(n=65536;0<=n;n-=4096)p=320,r=s+100/q*p*A[(n+H)%65536],p=g+100/q*p*A[(n+16384+H)%65536],z.lineTo(r,p);z.closePath();z.fillStyle="rgba("+(t.p*k+36*(1-k)).toFixed(0)+","+(t.n*k).toFixed(0)+","+(t.k*k).toFixed(0)+",1)";z.fill()}for(d=ta-9*f;0>d;)++sa,d+=100,2<=a&&0<ua&&--ua,1<=a&&0<va&&--va,3==a&&c>16E3-1E3*(1050/9)/60&&--wa;ta=d|0;H=H+65536-473*f&65535;3==a&&
(0<I?I-=9*f:(I=0,J=J+65536-100*f&65535))},function(a,c,d){a=Ba.data;var f=za.data;z.fillStyle="#350000";z.fillRect(0,0,640,50);z.fillRect(0,462,640,50);z.fillStyle="#46051e";z.fillRect(0,50,640,14);z.fillRect(0,448,640,14);z.fillStyle="#000000";z.fillRect(0,64,640,384);var m=0,e=c-15E3;0>e?e=0:3276.8>e&&(e=3276.8*y(5*(e/16384)));var e=0.25*A[5*e&65535],h=c-5E3;0>h&&(h=0);for(var h=1.5*A[7*h&65535],j=15300-c,j=(0<j?j:c?c/d-c:3E4)/2,q=500>j&&0<j,k=96,g=-96,t,s,n=16500<c?1100-c/2%1600:2E4,p=4;0>n;)--p,
n+=120;d=[];for(var r=-96;96>=r;++r)if(0!=r){var w=(h*Math.abs(r)/96+h)/2,K=r/50,B=r+2*(r-0),u=(288-B)/(K-w),C=0>u;C&&(u=(-288-B)/(K-w));K=C?Ga:Fa;w=(u- -150)/150;if(C&&u>n&&500>u&&(!q||u<j)&&0<p)d.push({u:r,r:-160/w-u*e,t:160/w-u*e,height:100/w,alpha:1-u/500}),n+=120,--p;C=v;if(q&&u>j)r<k&&(k=r),r>g&&(g=r,t=-160/w-j*e,s=160/w-j*e);else if(500>u)var ga=u+c/2,L=256*(1-u/500)&511,M=u*e,u=ga/O/4&255,C=0<=u?K[u]:v,ga=ga%O&255;u=-160/w-M;K=160/w-M;for(B=-160;160>B;++B){if(B<u||B>K||C===v||void 0===C)a[m++]=
a[m++]=a[m++]=0;else{var Ca=4*(ga*N+(((B+M)*w+160>>1)%20&4095)+C);a[m++]=f[Ca++]*L>>8;a[m++]=f[Ca++]*L>>8;a[m++]=f[Ca++]*L>>8}a[m++]=255}}Aa.putImageData(Ba,0,0);z.drawImage(P,0,64,640,384);q&&(z.globalAlpha=1-j/500,z.drawImage(Da,2*t+320,2*k+256,2*(s-t),2*(g-k)));for(t=d.length;c=d[--t];)s=2*c.r+320,L=2*(c.t-c.r),M=2*c.u+256,a=c.height,z.globalAlpha=1,z.fillStyle="#000000",z.fillRect(s,M,L,a),z.globalAlpha=c.alpha,z.drawImage(Ea,s,M,L,a)},function(a,c,d){var f=19*c+1E4;z.fillStyle="#441010";z.fillRect(0,
0,640,512);c=160*A[f&65535];var m=160*A[f+32768&65535],e=A[f+16384&65535],f=-e,h=2/(2-e),j=2/(2-f);c*=h;var m=m*j,q=F.width,k=F.height,g=G.width,t=G.height;switch(a){case 0:z.globalAlpha=0.2>d?5*d:0.8>d?1:5-5*d;a=q*h;d=k*h;z.drawImage(F,320+c-a/2,256-d/2,a,d);break;case 1:z.globalAlpha=0.2>d?5*d:0.8>d?1:5-5*d;a=g*h;d=t*h;0<e&&z.drawImage(F,320-q/2,256-k/2);z.drawImage(G,320+c-a/2,256-d/2,a,d);0>=e&&z.drawImage(F,320-q/2,256-k/2);break;case 2:z.globalAlpha=0.1>d?10*d:0.9>d?1:10-10*d,a=q*h,d=k*h,e=
g*j,j*=t,0<f&&z.drawImage(F,320+c-a/2,256-d/2,a,d),z.drawImage(G,320+m-e/2,256-j/2,e,j),0>=f&&z.drawImage(F,320+c-a/2,256-d/2,a,d)}},function(a,c,d){z.fillStyle="#110000";z.fillRect(0,0,640,512);a=Ka.width;var f=Ka.height;z.drawImage(Ka,320-a,256-f,2*a,2*f);a=Ia.data;for(var f=144*A[23*c&65535]+256-112|0,m=144*A[17*c&65535]+256-112|0,e=0,h=0;223>=h;++h)for(var j=0;223>=j;++j){var q=0;a[e++]=255;a[e++]=255;a[e++]=255;var k=Ja[j];0<k&&(k=((h-112)/k|0)+112,0<=k&&223>=k&&(q=Ma[512*(k+m)+j+f]));a[e++]=
q}Ha.clearRect(0,0,224,224);Ha.putImageData(Ia,0,0);z.drawImage(Q,96,32,448,448);512>c&&(z.fillStyle="#441000",z.fillRect(0,0,640,256-c/2),z.fillRect(0,256+c/2,640,256-c/2));0.95<d&&(z.fillStyle="rgba(0,0,0,"+(20*d-19).toFixed(3)+")",z.fillRect(0,0,640,512))},function(a,c,d){z.fillStyle="#000000";z.fillRect(0,0,640,512);a=R[a];var f=a.o,m=f.width*a.scale,e=f.height*a.scale;z.drawImage(f,320-(m>>1),256-(e>>1),m,e);500>c?(z.globalAlpha=1-c/500,z.fillStyle=a.l,z.fillRect(0,0,640,512)):(c=c/d-c,500>c&&
(z.globalAlpha=1-c/500,z.fillStyle=a.m,z.fillRect(0,0,640,512)))},function(a,c,d){var f=1;0.95<d&&(f=20*(1-d));z.fillStyle="#000000";z.fillRect(0,0,640,512);var m,e,h,j,q,k;switch(a){case 0:m=Sa;e=h=j=0;q=1024-2048*d;k=c/4;break;case 1:m=Ya,q=0,k=c/4,e=0,6E3<c?e=1:2E3<c&&(e=y((c-2E3)/4E3)),j=-c/10+2048*e*A[5*c+3E4&65535],h=1024*e*A[2*c+54E3&65535],e=18E3<c?1:14E3<c?y((c-14E3)/4E3):0,e=3072*e*A[3*(c-14E3)&65535]}k>m.length&&(k=m.length);z.fillStyle="#ffffff";for(a=0;a<k;++a){var g=m[a],t=$a(g.x+e);
d=$a(g.y+h);g=$a(g.s+j);g+=q;if(-1E3<g&&1E3>g){var s=512/(g+1024),t=320+s*t;d=256+s*d;0<t&&(640>t&&0<d&&512>d)&&(g=(512-g)/1024,0>g?g=0:1<g&&(g=1),z.globalAlpha=g*f,z.fillRect(t,d,2,2))}}c-=15100;if(0<=c&&(f=c/480/8|0,240>(c%480|0)))switch(z.globalAlpha=1,z.textAlign="left",z.textBaseline="top",f){case 0:z.fillStyle="#999999";z.font="40px sans-serif";z.fillText("Anders Tornblad",10,10);z.fillStyle="#666666";z.font="30px sans-serif";z.fillText("JavaScript, 2013",10,55);break;case 1:z.fillStyle="#999999";
z.font="40px sans-serif";z.fillText("Olivi\u00e9r Bechard (RA)",10,10);z.fillStyle="#666666";z.font="30px sans-serif";z.fillText("Graphics, 1993",10,55);break;case 2:z.fillStyle="#999999",z.font="40px sans-serif",z.fillText("Fr\u00e9d\u00e9ric Motte (Moby)",10,10),z.fillStyle="#666666",z.font="30px sans-serif",z.fillText("Music, 1993",10,55)}},function(a,c,d){z.fillStyle="#000000";z.fillRect(0,0,640,512);a=65536*A[65536*y(d)&65535];c=196608*y(d);for(var f=0.8>d?0.5:0.9>d?0.5-2.5*(d-0.8):3.75*y(10*
(d-0.9))+0.25,m=80*A[c&65535]+50,e=72*A[c+23E3&65535],h=50*A[a&65535]+52,j=bb.data,q=db.data,k=0,g=0;100>g;++g)for(var t=0;100>t;++t){var s=g-50,n=t-50,p=s*A[a+16384&65535]+n*A[a&65535],r=n*A[a+16384&65535]-s*A[a&65535],r=r-m,p=p-e,p=p/1,r=r/1,w=s*A[c+16384&65535]+n*A[c&65535],n=n*A[c+16384&65535]-s*A[c&65535],w=w/f,n=n/f,n=n-h,w=w- -40,s=(t+g-200)/200+2*d;0>s&&(s=0);1<s&&(s=1);r=r*(1-s)+n*s;p=p*(1-s)+w*s;r&=127;p&=127;p=4*(128*p+r);q[k++]=j[p++];q[k++]=j[p++];q[k++]=j[p++];q[k++]=255}cb.putImageData(db,
0,0);z.drawImage(V,120,56,400,400);z.fillStyle="#998888";z.textAlign="center";z.font="italic 40px serif";z.textBaseline="top";z.fillText("a glimpse from 1974",320,0);0.05>d&&(z.fillStyle="rgba(0,0,0,"+(1-20*d).toFixed(3)+")",z.fillRect(0,0,640,512));0.9<d&&(z.fillStyle="rgba(0,0,0,"+(10*d-9).toFixed(3)+")",z.fillRect(0,0,640,512))},function(a,c,d){z.fillStyle="#000000";z.fillRect(0,0,640,512);var f=a?hb:gb,m=a?fb:eb;a=a?0:60;var e=320-m.width/2;z.globalAlpha=0.9>d?1:10-10*d;for(d=0;d<f.length;++d){var h=
f[d];c>h.a&&z.drawImage(m,h.x,h.y,h.j,h.i,h.x+e,2*h.y+a,h.j,2*h.i)}}],jb=[{a:0,f:4700,g:0,h:0},{a:4700,f:8400,g:0,h:1},{a:8400,f:9500,g:0,h:2},{a:9500,f:4E4,g:2,h:0},{a:4E4,f:44E3,g:5,h:0},{a:44E3,f:48E3,g:5,h:1},{a:48E3,f:52E3,g:3,h:0},{a:52E3,f:56E3,g:3,h:1},{a:56E3,f:63300,g:3,h:2},{a:63300,f:82500,g:4,h:0},{a:82500,f:9E4,g:5,h:2},{a:9E4,f:94E3,g:5,h:3},{a:94E3,f:98E3,g:6,h:0},{a:98E3,f:128500,g:6,h:1},{a:128500,f:132500,g:1,h:0},{a:132500,f:139500,g:1,h:1},{a:139500,f:147E3,g:1,h:2},{a:147E3,
f:163E3,g:1,h:3},{a:163E3,f:178300,g:7,h:0},{a:178300,f:182300,g:8,h:0},{a:182300,f:188E3,g:8,h:1},v];function kb(a){if(na){ca=60*((a-ma)/1E3);ba=a-na;var c=jb[oa];c&&ba>=c.f&&(++oa,c=jb[oa]);if(c){var d=ba-c.a,f=d/(c.f-c.a);pa=ib[c.g];var m=(new Date).getTime();z.globalAlpha=1;z.save();pa.call(this,c.h,d,f,ca);z.restore()}c=(22-((new Date).getTime()-m)-10*ca)/200;0<c&&(c*=0.005);c=la+c;1<c?c=1:0.1>c&&(c=0.1);la=c}D&&(1>D&&(na=a-1E3*D-250),ma=a);qa&&x(kb)}function lb(){qa=b;x(kb)}
function mb(){D=this.currentTime}var W=[],X=0;function nb(a){W.push(a);++X;a=document.createEvent("Event");a.initEvent("itemsLoader",b,b);a.total=X;a.q=X-W.length;window.dispatchEvent(a)}function ob(a){for(var c=[],d=0;d<W.length;++d)W[d]!=a&&c.push(W[d]);W=c;a=document.createEvent("Event");a.initEvent("itemsLoader",b,b);a.total=X;a.q=X-W.length;window.dispatchEvent(a)}var Y=l;
function pb(){Y&&window.clearTimeout(Y);var a=this;Y=window.setTimeout(function(){Y=l;a.removeEventListener("progress",pb,v);ob(a)},2E3)}function qb(){Y&&(window.clearTimeout(Y),Y=l);this.removeEventListener("progress",pb,v);ob(this)}function rb(){ob(this)}function Z(a){var c=new Image;nb(c);c.addEventListener("load",rb,v);c.src=a+"?ts="+(new Date).getTime();return c}var $=l;
onLoadingDone=function(){$&&(window.clearTimeout($),$=l);for(var a=[],c=4*Math.atan(1),d=0;65535>=d;++d)a.push(Math.sin(d*c/32768));A=a;Q=document.createElement("CANVAS");Q.width=Q.height=224;Ha=Q.getContext("2d");Ia=Ha.createImageData(224,224);c=[];for(a=0;224>=a;++a)c.push(Math.sin(Math.acos(a/112-1)));Ja=c;a=document.createElement("CANVAS");a.width=512;a.height=512;a=a.getContext("2d");a.clearRect(0,0,512,512);a.drawImage(La,0,0);c=a.getImageData(0,0,512,512).data;Ma=Array(262144);for(var f=d=
0;512>f;++f)for(a=0;512>a;++a)Ma[d]=128<c[4*d]?112:0,++d;R.push({l:"#ffffff",m:"#000000",o:Na,scale:2});R.push({l:"#000000",m:"#441010",o:Oa,scale:2});R.push({l:"#ffffff",m:"#000000",o:Pa,scale:2});R.push({l:"#000000",m:"#000000",o:Qa,scale:2});N=ya.width;O=ya.height;a=document.createElement("CANVAS");a.width=N;a.height=O;a=a.getContext("2d");a.drawImage(ya,0,0,N,O);za=a.getImageData(0,0,N,O);P=document.createElement("CANVAS");P.width=320;P.height=192;Aa=P.getContext("2d");Ba=Aa.createImageData(320,
192);Fa=[];Ga=[];for(a=0;136>a;++a)c="    aaa aaaabbbb ccccaabbccccbddddaaaaaabbbbccdda abdbccdccc    caaabbbbbaaabbbb ccccaabbccccbdaaabbcccdaaa aaaabbbbaaabbcccdaaabbabbcab"[a]," "==c?Fa.push(v):Fa.push(20*(c.charCodeAt(0)-97)),c="    aaa aabbccddadddddaabbccdd aaabbcccdaaa aaaabbbb ccccbbb    cc ddddaaddddaaaaaabbbbccdda abccccaabbccccbddddaaaaaabbccddadddddaabbcc"[a]," "==c?Ga.push(v):Ga.push(20*(c.charCodeAt(0)-97));a=document.createElement("CANVAS");a.width=a.height=128;a=a.getContext("2d");
a.drawImage(ab,0,0);bb=a.getImageData(0,0,128,128);V=document.createElement("CANVAS");V.width=100;V.height=100;cb=V.getContext("2d");db=cb.createImageData(100,100);ra.play()};
onItemsLoader=function(a){$&&(window.clearTimeout($),$=l);z.fillStyle="#000000";z.fillRect(0,0,640,512);z.fillStyle="#ffffff";a.q==a.total?(z.font="50px sans-serif",z.textAlign="center",z.textBaseline="middle",z.fillText("Loading done!",320,256),z.font="20px sans-serif",z.fillText("Click to start...",320,296),window.setTimeout(onLoadingDone,10),ka.addEventListener("click",onLoadingDone,v)):(z.font="30px sans-serif",z.textAlign="center",z.textBaseline="middle",z.fillText("Loading...",320,256),z.font=
"20px sans-serif",z.fillText((100*(a.q/a.total)).toFixed(0)+" % done",320,296))};
onload=function(){ka=document.getElementById("demo");z=ka.getContext("2d");qa=v;window.addEventListener("itemsLoader",onItemsLoader,v);var a=document.createElement("AUDIO");a.controls=b;a.v="auto";nb(a);a.addEventListener("play",lb,v);a.addEventListener("timeupdate",mb,v);a.addEventListener("progress",pb,v);a.addEventListener("canplay",qb,v);var c=a.canPlayType("audio/ogg"),d=a.canPlayType("audio/mpeg");if("probably"==c||"maybe"==c&&"probably"!=d)a.src="livin-insanity.ogg";else if("probably"==d||
"maybe"==d)a.src="livin-insanity.mp3";a.load();ra=a;E=Z("whaaaaat.png");F=Z("biteArte2.png");G=Z("deadChicken2.png");Ka=Z("globe.png");La=Z("globeDoodles.png");Na=Z("sanity1.png");Oa=Z("madman.png");ya=Z("tunnelBits.png");Da=Z("tunnelWall.png");Ea=Z("tunnelHanger.png");Pa=Z("einstein.png");Qa=Z("sanity2.png");ab=Z("seventies.png");eb=Z("hailSalvadore.png");fb=Z("trueArtists.png")};window.onload=onload;